<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ONTO — Check AI Risk</title>
<meta name="description" content="Free AI output risk check. Paste any AI response and get instant epistemic risk scoring with ECE, U-Recall, and cryptographic proof from ONTO Standard.">
<meta name="keywords" content="AI risk, AI safety, epistemic risk, AI evaluation, AI trust, ONTO Standard, AI check, ECE, U-Recall">
<meta property="og:title" content="ONTO Check — Is Your AI Trustworthy?">
<meta property="og:description" content="Paste any AI response. Get instant risk score with ECE, U-Recall, and verifiable proof. Free, no registration.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ontostandard.org/check/">
<link rel="canonical" href="https://ontostandard.org/check/">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'%3E%3Ccircle cx='18' cy='18' r='17' fill='white'/%3E%3Cpath d='M16 10L20 10L20 26L16 26L16 14L13 14L13 10L16 10Z' fill='%230a0a0a'/%3E%3C/svg%3E">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"ONTO Check","description":"Free AI output epistemic risk scoring tool with ECE, U-Recall, and cryptographic proof","url":"https://ontostandard.org/check/","applicationCategory":"UtilityApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"provider":{"@type":"Organization","name":"ONTO Standard","url":"https://ontostandard.org"}}</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0a;--bg-s:#121212;--bg-c:#1a1a1a;--bg-e:#242424;--border:#333;--text:#fafafa;--text-s:#a0a0a0;--text-m:#606060;--accent:#15803d;--accent-s:rgba(21,128,61,.15);--danger:#dc2626;--danger-s:rgba(220,38,38,.15);--warning:#d97706;--warning-s:rgba(217,119,6,.15);--cyan:#06b6d4;--cyan-s:rgba(6,182,212,.12)}
[data-theme="light"]{--bg:#fff;--bg-s:#f9fafb;--bg-c:#fff;--bg-e:#f3f4f6;--border:#e5e7eb;--text:#111827;--text-s:#6b7280;--text-m:#9ca3af;--cyan-s:rgba(6,182,212,.08)}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);font-size:14px;line-height:1.6;overflow-x:hidden}
a{color:var(--accent);text-decoration:none}a:hover{text-decoration:underline}
code{font-family:'JetBrains Mono','SF Mono',Consolas,monospace;font-size:11px}

.topbar{position:sticky;top:0;height:56px;background:var(--bg-c);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 24px;z-index:50;user-select:none;-webkit-user-select:none}
.topbar-left{display:flex;align-items:center;gap:16px}
.tb-logo{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);font-size:16px;font-weight:600}
.tb-logo:hover{text-decoration:none}
.tb-logo svg{width:22px;height:22px}
.tb-sep{width:1px;height:20px;background:var(--border)}
.tb-page{font-size:13px;color:var(--text-m);font-weight:500}
.topbar-right{display:flex;align-items:center;gap:8px}
.tb-link{font-size:12px;color:var(--text-s);padding:6px 10px;border-radius:4px;text-decoration:none;transition:.15s}
.tb-link:hover{background:var(--bg-e);color:var(--text);text-decoration:none}
.tb-btn{padding:6px 14px;background:var(--accent-s);color:var(--accent);border:1px solid var(--accent);border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:.15s;text-decoration:none}
.tb-btn:hover{background:var(--accent);color:#fff;text-decoration:none}
.tb-icon{background:none;border:none;cursor:pointer;color:var(--text-m);padding:6px;border-radius:4px;transition:.15s;display:flex;align-items:center}
.tb-icon:hover{background:var(--bg-e);color:var(--text)}
.tb-icon svg{width:18px;height:18px}

.main{max-width:680px;margin:0 auto;padding:48px 24px 100px}
.page-title{font-size:22px;font-weight:600;margin-bottom:6px}
.page-meta{display:flex;gap:8px;font-size:11px;color:var(--text-m);margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:center}
.badge{display:inline-block;padding:2px 6px;border-radius:3px;font-size:10px;font-weight:500}
.bg-g{background:var(--accent-s);color:var(--accent)}.bg-b{background:rgba(59,130,246,.15);color:#3b82f6}.bg-c{background:var(--cyan-s);color:var(--cyan)}

.check-card{background:var(--bg-c);border:1px solid var(--border);border-radius:6px;padding:20px;margin-bottom:16px}
.check-label{font-size:10px;text-transform:uppercase;letter-spacing:.5px;color:var(--text-m);margin-bottom:8px;font-weight:500}
.check-textarea{width:100%;min-height:160px;background:var(--bg-e);border:1px solid var(--border);border-radius:4px;padding:10px 12px;color:var(--text);font-family:inherit;font-size:13px;line-height:1.6;resize:vertical;outline:none;transition:.15s}
.check-textarea:focus{border-color:var(--accent)}
.check-textarea::placeholder{color:var(--text-m)}
.check-row{display:flex;gap:10px;align-items:center;margin-top:12px;flex-wrap:wrap}
.check-select{background:var(--bg-e);border:1px solid var(--border);border-radius:4px;padding:8px 10px;color:var(--text);font-family:inherit;font-size:12px;outline:none;cursor:pointer}
.check-select:focus{border-color:var(--accent)}
.check-btn{flex:1;min-width:140px;padding:10px 20px;background:var(--accent-s);color:var(--accent);border:1px solid var(--accent);border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:.15s}
.check-btn:hover{background:var(--accent);color:#fff}
.check-btn:disabled{opacity:.4;cursor:not-allowed}
.check-count{font-size:11px;color:var(--text-m);margin-left:auto}

.error-msg{display:none;padding:10px 14px;background:var(--danger-s);border:1px solid var(--danger);border-radius:4px;color:var(--danger);font-size:12px;margin-bottom:12px}
.error-msg.active{display:block}

.loading{display:none;text-align:center;padding:24px}
.loading.active{display:block}
.ld{display:inline-block;width:7px;height:7px;border-radius:50%;background:var(--accent);margin:0 3px;animation:lp 1.2s infinite}
.ld:nth-child(2){animation-delay:.2s}.ld:nth-child(3){animation-delay:.4s}
@keyframes lp{0%,100%{opacity:.2;transform:scale(.8)}50%{opacity:1;transform:scale(1.2)}}
.lt{font-size:11px;color:var(--text-m);margin-top:10px}

.result{display:none;background:var(--bg-c);border:1px solid var(--border);border-radius:6px;overflow:hidden;margin-bottom:16px;animation:su .3s ease}
.result.active{display:block}
@keyframes su{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

.r-header{display:flex;align-items:center;gap:16px;padding:20px;border-bottom:1px solid var(--border)}
.r-circle{width:68px;height:68px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0}
.r-circle.low{background:var(--accent-s);border:2px solid var(--accent)}
.r-circle.medium{background:var(--warning-s);border:2px solid var(--warning)}
.r-circle.high{background:var(--danger-s);border:2px solid var(--danger)}
.r-score{font-size:20px;font-weight:700;line-height:1;font-family:'SF Mono',Consolas,monospace}
.r-circle.low .r-score{color:var(--accent)}.r-circle.medium .r-score{color:var(--warning)}.r-circle.high .r-score{color:var(--danger)}
.r-label{font-size:9px;color:var(--text-m);margin-top:2px;text-transform:uppercase;letter-spacing:.5px}
.r-meta{flex:1}
.r-tags{display:flex;gap:8px;margin-bottom:6px;flex-wrap:wrap}
.r-tag{font-size:11px;padding:2px 8px;border-radius:3px;font-weight:500}
.r-tag.layer{background:var(--bg-e);color:var(--text-s)}
.r-tag.c-PASSED{background:var(--accent-s);color:var(--accent)}
.r-tag.c-REVIEW{background:var(--warning-s);color:var(--warning)}
.r-tag.c-FAILED{background:var(--danger-s);color:var(--danger)}
.r-tag.engine-tag{background:var(--cyan-s);color:var(--cyan);font-family:'SF Mono',Consolas,monospace;font-size:10px}
.r-summary{font-size:12px;color:var(--text-s);line-height:1.5}

/* Certification panel */
.r-cert{display:none;padding:16px 20px;border-bottom:1px solid var(--border);background:linear-gradient(135deg,var(--bg-c),rgba(6,182,212,.03))}
.r-cert-title{font-size:10px;text-transform:uppercase;letter-spacing:.5px;color:var(--cyan);margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:6px}
.r-cert-title svg{width:12px;height:12px}
.cert-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.cert-item{display:flex;flex-direction:column;gap:2px}
.cert-k{font-size:9px;text-transform:uppercase;letter-spacing:.5px;color:var(--text-m);font-weight:500}
.cert-v{font-size:13px;font-family:'SF Mono',Consolas,monospace;color:var(--text);font-weight:600}
.cert-v.good{color:var(--accent)}.cert-v.warn{color:var(--warning)}.cert-v.bad{color:var(--danger)}.cert-v.neutral{color:var(--cyan)}
.cert-proof{grid-column:1/-1;margin-top:4px;padding-top:8px;border-top:1px solid var(--border)}
.cert-proof .cert-v{font-size:11px;word-break:break-all;color:var(--text-m);font-weight:400}
.cert-status{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:3px;font-size:10px;font-weight:600;font-family:'SF Mono',Consolas,monospace}
.cert-status.sandbox{background:var(--cyan-s);color:var(--cyan)}
.cert-status.compliant{background:var(--accent-s);color:var(--accent)}
.cert-status.non-compliant{background:var(--danger-s);color:var(--danger)}
.cert-dot{width:6px;height:6px;border-radius:50%;animation:pulse 2s infinite}
.cert-status.sandbox .cert-dot{background:var(--cyan)}
.cert-status.compliant .cert-dot{background:var(--accent)}
.cert-status.non-compliant .cert-dot{background:var(--danger)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

.r-factors{padding:16px 20px;border-bottom:1px solid var(--border)}
.r-ftitle{font-size:10px;text-transform:uppercase;letter-spacing:.5px;color:var(--text-m);margin-bottom:12px;font-weight:500}
.f-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.f-row.disabled{opacity:.35}
.f-name{font-size:11px;color:var(--text-s);width:110px;flex-shrink:0}
.f-bar{flex:1;height:5px;background:var(--bg-e);border-radius:3px;overflow:hidden}
.f-fill{height:100%;border-radius:3px;transition:width .5s ease}
.f-val{font-size:11px;width:32px;text-align:right;color:var(--text-s);font-family:'SF Mono',Consolas,monospace}
.f-val.na{color:var(--text-m);font-size:10px}
.f-sep{height:1px;background:var(--border);margin:10px 0}
.f-section{font-size:9px;text-transform:uppercase;letter-spacing:.5px;color:var(--cyan);margin-bottom:8px;font-weight:600}
.f-fill.ece{background:var(--cyan)}
.f-fill.urecall{background:var(--cyan)}

.r-recs{padding:16px 20px}
.rec{display:flex;align-items:flex-start;gap:6px;margin-bottom:6px;font-size:11px;color:var(--text-s);line-height:1.4}
.rec-d{width:4px;height:4px;border-radius:50%;margin-top:5px;flex-shrink:0}
.rec-d.high{background:var(--danger)}.rec-d.medium{background:var(--warning)}.rec-d.low{background:var(--accent)}

.actions{display:none;gap:8px;margin-bottom:24px}
.act-btn{padding:6px 14px;border:1px solid var(--border);background:var(--bg-c);color:var(--text-s);border-radius:4px;font-size:11px;cursor:pointer;transition:.15s}
.act-btn:hover{border-color:var(--accent);color:var(--accent)}

.remaining{font-size:11px;color:var(--text-m);text-align:center;margin-bottom:24px}

.info-sep{height:1px;background:var(--border);margin:40px 0}
.info-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:24px}
.info-card{background:var(--bg-c);border:1px solid var(--border);border-radius:6px;padding:14px}
.info-icon{font-size:18px;margin-bottom:6px}
.info-title{font-size:11px;font-weight:600;margin-bottom:3px}
.info-desc{font-size:11px;color:var(--text-m);line-height:1.4}

.layers-row{display:flex;gap:10px;margin-bottom:24px}
.layer{flex:1;padding:10px;border-radius:6px;text-align:center}
.layer.l3{background:var(--accent-s);border:1px solid var(--accent)}
.layer.l2{background:var(--warning-s);border:1px solid var(--warning)}
.layer.l1{background:var(--danger-s);border:1px solid var(--danger)}
.layer-n{font-size:13px;font-weight:700;margin-bottom:1px}
.layer.l3 .layer-n{color:var(--accent)}.layer.l2 .layer-n{color:var(--warning)}.layer.l1 .layer-n{color:var(--danger)}
.layer-r{font-size:10px;color:var(--text-m)}

.cta{text-align:center;margin:32px 0}
.cta-hint{font-size:11px;color:var(--text-m);margin-bottom:10px}
.cta-a{display:inline-block;padding:8px 24px;border-radius:6px;font-size:12px;font-weight:500;text-decoration:none;transition:.15s}
.cta-a.primary{background:var(--accent-s);color:var(--accent);border:1px solid var(--accent)}
.cta-a.primary:hover{background:var(--accent);color:#fff;text-decoration:none}
.cta-a.secondary{background:var(--bg-c);color:var(--text-s);border:1px solid var(--border)}
.cta-a.secondary:hover{border-color:var(--accent);color:var(--accent);text-decoration:none}
.cta-sep{margin:0 8px;color:var(--text-m);font-size:11px}

.ext-card{text-align:center;margin:20px 0;padding:16px;background:var(--bg-c);border:1px solid var(--border);border-radius:6px}
.ext-t{font-size:13px;font-weight:600;margin-bottom:4px}
.ext-t .sigma{color:var(--accent)}
.ext-d{font-size:11px;color:var(--text-m);margin-bottom:10px}
.ext-badge{display:inline-block;padding:6px 16px;background:var(--accent-s);border:1px solid var(--accent);color:var(--accent);border-radius:6px;font-size:11px;font-weight:500;text-decoration:none}

.footer{text-align:center;padding:24px 0;border-top:1px solid var(--border);margin-top:32px}
.footer-links{display:flex;gap:16px;justify-content:center;margin-bottom:8px}
.footer-links a{color:var(--text-m);text-decoration:none;font-size:11px;transition:.15s}
.footer-links a:hover{color:var(--accent)}
.footer-copy{font-size:10px;color:var(--text-m)}

@media(max-width:600px){
.topbar{padding:0 12px}
.topbar-right .tb-link{display:none}
.main{padding:24px 16px 80px}
.page-title{font-size:18px}
.r-header{flex-direction:column;text-align:center}
.info-grid{grid-template-columns:1fr}
.layers-row{flex-direction:column}
.check-row{flex-direction:column}
.check-btn{width:100%}
.cert-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header class="topbar">
<div class="topbar-left">
<a href="/" class="tb-logo">
<svg width="22" height="22" viewBox="0 0 36 36" fill="none"><circle cx="18" cy="18" r="17" fill="white"/><path d="M16 10L20 10L20 26L16 26L16 14L13 14L13 10L16 10Z" fill="#0a0a0a"/></svg>
<span>ONTO</span>
</a>
<div class="tb-sep"></div>
<span class="tb-page">Check</span>
</div>
<div class="topbar-right">
<a href="/docs/" class="tb-link">Docs</a>
<a href="/pricing/" class="tb-link">Pricing</a>
<a href="/app/" class="tb-btn">Dashboard</a>
<button class="tb-icon" onclick="toggleTheme()" title="Toggle theme">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</header>

<div class="main">

<h1 class="page-title">AI Risk Check</h1>
<div class="page-meta">
<span class="badge bg-g">Free</span>
<span class="badge bg-b">50/day</span>
<span class="badge bg-c">ECE + U-Recall</span>
<span>Paste any AI response &mdash; get certified epistemic risk score</span>
</div>

<div class="check-card">
<div class="check-label">AI Response</div>
<textarea class="check-textarea" id="ai-output" placeholder="Paste the AI response you want to evaluate..."></textarea>
<div class="check-row">
<select class="check-select" id="domain-select">
<option value="general">General</option>
<option value="medical">Medical</option>
<option value="legal">Legal</option>
<option value="finance">Finance</option>
<option value="technical">Technical</option>
</select>
<button class="check-btn" id="check-btn" onclick="runCheck()">&sigma; Check Risk</button>
<span class="check-count" id="char-count">0 chars</span>
</div>
</div>

<div class="error-msg" id="error-msg"></div>

<div class="loading" id="loading">
<span class="ld"></span><span class="ld"></span><span class="ld"></span>
<div class="lt">Evaluating &mdash; ECE &middot; U-Recall &middot; 7 risk factors...</div>
</div>

<div class="result" id="result">
<div class="r-header">
<div class="r-circle" id="r-circle">
<div class="r-score" id="r-score">&mdash;</div>
<div class="r-label">risk</div>
</div>
<div class="r-meta">
<div class="r-tags">
<span class="r-tag layer" id="r-layer">&mdash;</span>
<span class="r-tag" id="r-compliance">&mdash;</span>
<span class="r-tag engine-tag" id="r-engine" style="display:none"></span>
</div>
<div class="r-summary" id="r-summary"></div>
</div>
</div>

<!-- ONTO Certification Panel -->
<div class="r-cert" id="r-cert">
<div class="r-cert-title">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
ONTO Certification
</div>
<div class="cert-grid">
<div class="cert-item">
<span class="cert-k">U-Recall</span>
<span class="cert-v" id="c-urecall">&mdash;</span>
</div>
<div class="cert-item">
<span class="cert-k">ECE</span>
<span class="cert-v" id="c-ece">&mdash;</span>
</div>
<div class="cert-item">
<span class="cert-k">Signal</span>
<span class="cert-v neutral" id="c-sigma">&mdash;</span>
</div>
<div class="cert-item">
<span class="cert-k">Status</span>
<span id="c-status"></span>
</div>
<div class="cert-item cert-proof">
<span class="cert-k">Proof Hash</span>
<span class="cert-v" id="c-proof">&mdash;</span>
</div>
</div>
</div>

<div class="r-factors">
<div class="r-ftitle">Factor Breakdown</div>
<div id="factors"></div>
</div>
<div class="r-recs" id="recs-section">
<div class="r-ftitle">Recommendations</div>
<div id="recs"></div>
</div>
</div>

<div class="actions" id="actions">
<button class="act-btn" onclick="resetCheck()">&#8617; New Check</button>
<button class="act-btn" onclick="copyResult()">&#9112; Copy</button>
<button class="act-btn" onclick="copyProof()">&#128271; Copy Proof</button>
<button class="act-btn" onclick="shareResult()">&#8599; Share</button>
</div>

<div class="remaining" id="remaining"></div>

<div class="info-sep"></div>

<div class="info-grid">
<div class="info-card">
<div class="info-icon">&#128300;</div>
<div class="info-title">ECE + U-Recall</div>
<div class="info-desc">Expected Calibration Error and Uncertainty Recall &mdash; real metrics, not keyword counting.</div>
</div>
<div class="info-card">
<div class="info-icon">&#128271;</div>
<div class="info-title">Proof Hash</div>
<div class="info-desc">Every evaluation generates a cryptographic proof tied to &sigma;(t) signal. Verifiable, tamper-proof.</div>
</div>
<div class="info-card">
<div class="info-icon">&#9889;</div>
<div class="info-title">No AI in the Loop</div>
<div class="info-desc">Deterministic scoring engine. No LLM calls. Instant results, reproducible, verifiable.</div>
</div>
</div>

<div class="layers-row">
<div class="layer l3"><div class="layer-n">L3 PASSED</div><div class="layer-r">Risk &lt; 0.35</div></div>
<div class="layer l2"><div class="layer-n">L2 REVIEW</div><div class="layer-r">Risk 0.35 &mdash; 0.65</div></div>
<div class="layer l1"><div class="layer-n">L1 FAILED</div><div class="layer-r">Risk &gt; 0.65</div></div>
</div>

<div class="cta">
<div class="cta-hint">Need automated monitoring?</div>
<a href="/app/" class="cta-a primary">Open Dashboard</a>
<span class="cta-sep">or</span>
<a href="/pricing/" class="cta-a secondary">View Pricing</a>
</div>

<div class="ext-card">
<div class="ext-t"><span class="sigma">&sigma;</span> Browser Extension</div>
<div class="ext-d">Check AI responses directly inside ChatGPT, Claude, and Gemini.</div>
<a href="/extension/" class="ext-badge">Get Extension</a>
</div>

<div class="footer">
<div class="footer-links">
<a href="/">Home</a>
<a href="/docs/">Docs</a>
<a href="/pricing/">Pricing</a>
<a href="/legal/">Legal</a>
</div>
<div class="footer-copy">&copy; 2025 ONTO Standard. Epistemic risk management for AI.</div>
</div>

</div>

<script>
function toggleTheme(){var t=document.documentElement.dataset.theme==='dark'?'light':'dark';document.documentElement.dataset.theme=t;localStorage.setItem('onto-theme',t)}
(function(){var t=localStorage.getItem('onto-theme');if(t)document.documentElement.dataset.theme=t})();

var API='https://api.ontostandard.org/v1/check';
var lastResult=null;
var ta=document.getElementById('ai-output'),cc=document.getElementById('char-count');
ta.addEventListener('input',function(){cc.textContent=ta.value.length.toLocaleString()+' chars'});
ta.addEventListener('keydown',function(e){if((e.ctrlKey||e.metaKey)&&e.key==='Enter')runCheck()});

function runCheck(){
var output=ta.value.trim();
if(!output||output.length<3){showError('Please paste a longer AI response.');return}
var domain=document.getElementById('domain-select').value;
var btn=document.getElementById('check-btn');
hide('error-msg');hide('result');hide('actions');
btn.disabled=true;btn.textContent='Checking...';show('loading');
fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({output:output.substring(0,10000),domain:domain})})
.then(function(r){
if(!r.ok)return r.json().catch(function(){return{}}).then(function(e){throw new Error(e.detail||'Error '+r.status)});
return r.json();
})
.then(function(data){lastResult=data;displayResult(data)})
.catch(function(e){showError(e.message)})
.then(function(){btn.disabled=false;btn.textContent='\u03C3 Check Risk';hide('loading')});
}

function displayResult(d){
var risk=parseFloat(d.risk_score||0);
var cls=risk<0.35?'low':risk<0.65?'medium':'high';
var layer=d.layer||(risk<0.35?'L3':risk<0.65?'L2':'L1');
var comp=d.compliance||(risk<0.35?'PASSED':risk<0.65?'REVIEW':'FAILED');
document.getElementById('r-circle').className='r-circle '+cls;
document.getElementById('r-score').textContent=risk.toFixed(2);
document.getElementById('r-layer').textContent=layer;
var ce=document.getElementById('r-compliance');ce.textContent=comp;ce.className='r-tag c-'+comp;
var sm={low:'Low epistemic risk. Strong calibration indicators.',medium:'Moderate risk. Some uncertainty signals detected.',high:'High risk. Significant calibration issues found.'};
document.getElementById('r-summary').textContent=sm[cls];

// Engine tag
var eng=d.engine;
var engEl=document.getElementById('r-engine');
if(eng&&eng!=='error'){
engEl.textContent=eng==='rust'?'\u26A1 RUST':eng==='python_fallback'?'\uD83D\uDC0D FALLBACK':'\u25CF '+eng.toUpperCase();
engEl.style.display='';
}else{engEl.style.display='none'}

// Certification panel
var certEl=document.getElementById('r-cert');
if(d.u_recall!=null||d.ece!=null||d.proof_hash){
certEl.style.display='block';

var ur=parseFloat(d.u_recall);
var urEl=document.getElementById('c-urecall');
if(!isNaN(ur)){urEl.textContent=ur.toFixed(4);urEl.className='cert-v '+(ur>=0.75?'good':ur>=0.5?'warn':'bad')}
else{urEl.textContent='\u2014';urEl.className='cert-v'}

var ece=parseFloat(d.ece);
var eceEl=document.getElementById('c-ece');
if(!isNaN(ece)){eceEl.textContent=ece.toFixed(4);eceEl.className='cert-v '+(ece<=0.1?'good':ece<=0.3?'warn':'bad')}
else{eceEl.textContent='\u2014';eceEl.className='cert-v'}

document.getElementById('c-sigma').textContent=d.sigma_id||'\u2014';

var status=d.onto_status||'';
var sEl=document.getElementById('c-status');
var sCls='sandbox',sText=status;
if(status.indexOf('SANDBOX')>=0){sCls='sandbox';sText='SANDBOX MODE'}
else if(status.indexOf('COMPLIANT')>=0&&status.indexOf('NON')<0){sCls='compliant';sText='COMPLIANT'}
else if(status.indexOf('NON_COMPLIANT')>=0){sCls='non-compliant';sText='NON COMPLIANT'}
sEl.innerHTML='<span class="cert-status '+sCls+'"><span class="cert-dot"></span>'+sText+'</span>';

document.getElementById('c-proof').textContent=d.proof_hash||'\u2014';
}else{certEl.style.display='none'}

// Factors — show all 7, gray out unavailable
var f=d.factors||{};
var allFactors=[
['linguistic_uncertainty','Linguistic'],
['confidence_calibration','Confidence'],
['logprob_entropy','Entropy'],
['semantic_consistency','Semantic'],
['ground_truth_accuracy','Accuracy'],
['refusal_awareness','Refusal'],
['domain_risk','Domain Risk']
];
var fh='';
for(var i=0;i<allFactors.length;i++){
var k=allFactors[i][0],label=allFactors[i][1];
var raw=f[k];
var nv=(raw!=null)?parseFloat(raw):NaN;
var hasVal=!isNaN(nv);
var p=hasVal?Math.min(nv*100,100):0;
var c=hasVal?(nv<0.3?'var(--accent)':nv<0.6?'var(--warning)':'var(--danger)'):'var(--bg-e)';
fh+='<div class="f-row'+(hasVal?'':' disabled')+'"><span class="f-name">'+label+'</span><div class="f-bar"><div class="f-fill" style="width:'+p+'%;background:'+c+'"></div></div><span class="f-val'+(hasVal?'':' na')+'">'+(hasVal?nv.toFixed(2):'N/A')+'</span></div>';
}
// ECE + U-Recall bars
if(d.u_recall!=null||d.ece!=null){
fh+='<div class="f-sep"></div><div class="f-section">ONTO Core Metrics</div>';
var ur=parseFloat(d.u_recall);
if(!isNaN(ur)){
var urC=ur>=0.75?'var(--accent)':ur>=0.5?'var(--warning)':'var(--danger)';
fh+='<div class="f-row"><span class="f-name">U-Recall</span><div class="f-bar"><div class="f-fill" style="width:'+Math.min(ur*100,100)+'%;background:'+urC+'"></div></div><span class="f-val">'+ur.toFixed(2)+'</span></div>';
}
var ec=parseFloat(d.ece);
if(!isNaN(ec)){
var ecC=ec<=0.1?'var(--accent)':ec<=0.3?'var(--warning)':'var(--danger)';
fh+='<div class="f-row"><span class="f-name">ECE</span><div class="f-bar"><div class="f-fill" style="width:'+Math.min(ec*100,100)+'%;background:'+ecC+'"></div></div><span class="f-val">'+ec.toFixed(2)+'</span></div>';
}
}
document.getElementById('factors').innerHTML=fh;

// Recommendations
var recs=d.recommendations||[];
var rs=document.getElementById('recs-section');
if(recs.length){
var rh='';
for(var i=0;i<recs.length;i++){
var r=recs[i];
var msg=typeof r==='string'?r:(r.message||'');
var sev=typeof r==='object'?(r.severity||'low'):'low';
rh+='<div class="rec"><span class="rec-d '+sev+'"></span>'+msg+'</div>';
}
document.getElementById('recs').innerHTML=rh;rs.style.display='';
}else{rs.style.display='none'}

if(d.remaining_today!=null)document.getElementById('remaining').textContent=d.remaining_today+' checks remaining today';
show('result');document.getElementById('actions').style.display='flex';
document.getElementById('result').scrollIntoView({behavior:'smooth',block:'start'});
}

function showError(m){var e=document.getElementById('error-msg');e.textContent=m;e.classList.add('active')}
function hide(id){var e=document.getElementById(id);e.classList.remove('active');if(e.style)e.style.display=''}
function show(id){document.getElementById(id).classList.add('active')}

function resetCheck(){ta.value='';cc.textContent='0 chars';hide('result');document.getElementById('actions').style.display='none';hide('error-msg');document.getElementById('remaining').textContent='';lastResult=null;ta.focus()}

function copyResult(){
if(!lastResult)return;
var lines=['ONTO Check: Risk '+(lastResult.risk_score!=null?lastResult.risk_score.toFixed(2):'?')+' | '+lastResult.layer+' | '+lastResult.compliance];
if(lastResult.u_recall!=null)lines.push('U-Recall: '+parseFloat(lastResult.u_recall).toFixed(4)+' | ECE: '+parseFloat(lastResult.ece).toFixed(4));
if(lastResult.proof_hash)lines.push('Proof: '+lastResult.proof_hash);
if(lastResult.sigma_id)lines.push('Signal: '+lastResult.sigma_id);
lines.push('https://ontostandard.org/check/');
navigator.clipboard.writeText(lines.join('\n'));
var b=event.target;b.textContent='\u2713 Copied';setTimeout(function(){b.textContent='\u2398 Copy'},1500);
}

function copyProof(){
if(!lastResult||!lastResult.proof_hash)return;
var proof={risk_score:lastResult.risk_score,u_recall:lastResult.u_recall,ece:lastResult.ece,sigma_id:lastResult.sigma_id,proof_hash:lastResult.proof_hash,onto_status:lastResult.onto_status,engine:lastResult.engine,timestamp:new Date().toISOString()};
navigator.clipboard.writeText(JSON.stringify(proof,null,2));
var b=event.target;b.textContent='\u2713 Proof Copied';setTimeout(function(){b.textContent='\uD83D\uDD0F Copy Proof'},1500);
}

function shareResult(){
if(!lastResult)return;
var t='AI risk: '+(lastResult.risk_score!=null?lastResult.risk_score.toFixed(2):'?')+' | U-Recall: '+lastResult.u_recall+' | ECE: '+lastResult.ece+' \u2014 ONTO Standard';
var u='https://ontostandard.org/check/';
if(navigator.share){navigator.share({title:'ONTO Check',text:t,url:u})}
else{navigator.clipboard.writeText(t+'\n'+u);var b=event.target;b.textContent='\u2713 Copied';setTimeout(function(){b.textContent='\u2197 Share'},1500)}
}
</script>
</body>
</html>
