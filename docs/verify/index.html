<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verify Certificate — ONTO Standard</title>
<meta name="description" content="Verify any ONTO certificate. Confirm that an AI model operates under ONTO GOLD epistemic discipline layer. Ed25519 signed.">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://ontostandard.org/verify/">
<meta property="og:title" content="Verify Certificate — ONTO Standard">
<meta property="og:description" content="Verify that an AI model operates under ONTO GOLD epistemic discipline. Cryptographically signed. Publicly verifiable.">
<meta property="og:url" content="https://ontostandard.org/verify/">
<meta property="og:type" content="website">
<meta property="og:image" content="https://ontostandard.org/og-image.png">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "ONTO Certificate Verification",
  "url": "https://ontostandard.org/verify/",
  "description": "Verify ONTO VERIFIED certificates — proof that AI models operate under epistemic discipline",
  "applicationCategory": "SecurityApplication",
  "operatingSystem": "Web",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
}
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
    --bg:#0a0a0a;--bg-card:#1a1a1a;--bg-input:#121212;
    --border:#333333;--border-accent:rgba(21,128,61,0.3);
    --text:#fafafa;--text-muted:#606060;--text-secondary:#a0a0a0;
    --accent:#15803d;--accent-light:#22c55e;--accent-subtle:rgba(21,128,61,0.15);
    --danger:#dc2626;--danger-subtle:rgba(220,38,38,0.15);
    --warn:#d97706;
}
html{background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;-webkit-font-smoothing:antialiased}
body{min-height:100vh;display:flex;flex-direction:column}

.mono{font-family:'JetBrains Mono',monospace}
.nav{padding:16px 24px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.nav-brand{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);font-weight:600;font-size:16px}
.nav-sep{color:var(--border);font-weight:300;font-size:14px}
.nav-page{font-size:13px;color:var(--text-muted);font-weight:400}
.signal-hash{display:flex;align-items:center;gap:4px;font-size:11px}

.container{flex:1;max-width:640px;width:100%;margin:0 auto;padding:48px 24px}
.page-title{font-size:20px;font-weight:700;letter-spacing:-.5px;margin-bottom:6px}
.page-sub{font-size:12px;color:var(--text-secondary);line-height:1.6;margin-bottom:28px}
.page-sub strong{color:var(--accent-light);font-weight:600}

/* SEARCH */
.search-card{background:var(--bg-card);border:1px solid var(--border);border-radius:6px;padding:20px;margin-bottom:20px}
.search-label{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);margin-bottom:6px;display:block;font-weight:600}
.search-row{display:flex;gap:8px}
.search-input{flex:1;background:var(--bg-input);border:1px solid var(--border);border-radius:4px;padding:10px 12px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:12px;outline:none;transition:border-color .15s}
.search-input:focus{border-color:var(--accent)}
.search-input::placeholder{color:var(--text-muted);opacity:.4}
.search-btn{background:var(--accent);color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:12px;font-weight:600;cursor:pointer;transition:opacity .15s;white-space:nowrap;font-family:'Inter',sans-serif}
.search-btn:hover{opacity:.85}
.search-btn:disabled{opacity:.3;cursor:not-allowed}
.search-hint{font-size:10px;color:var(--text-muted);margin-top:8px}
.search-hint code{font-family:'JetBrains Mono',monospace;background:var(--bg);padding:1px 4px;border-radius:2px;font-size:9px}

/* RESULT */
.result{display:none;animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* Signal-style panel for result */
.cert-panel{background:linear-gradient(135deg,#0a1a0f 0%,#0d2818 50%,#0a1a0f 100%);border:1px solid var(--border-accent);border-radius:6px;padding:20px;position:relative;overflow:hidden}
.cert-panel::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 0%,rgba(34,197,94,0.06) 0%,transparent 70%);pointer-events:none}
.cert-panel::after{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 0%,rgba(34,197,94,0.6) 50%,transparent 100%);pointer-events:none}

.cert-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative}
.cert-title{display:flex;align-items:center;gap:8px}
.cert-title svg{color:var(--accent-light)}
.cert-title span{font-size:14px;font-weight:700;letter-spacing:1px;color:var(--accent-light)}
.cert-badge{display:inline-flex;align-items:center;gap:5px;padding:4px 12px;border-radius:4px;font-size:10px;font-weight:700;letter-spacing:.5px}
.badge-active{background:var(--accent-subtle);color:var(--accent-light);border:1px solid var(--border-accent)}
.badge-active .dot{width:6px;height:6px;border-radius:50%;background:var(--accent-light);animation:pulse 2s infinite}
.badge-suspended{background:var(--danger-subtle);color:var(--danger);border:1px solid rgba(239,68,68,0.3)}
.badge-suspended .dot{width:6px;height:6px;border-radius:50%;background:var(--danger)}
@keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 4px rgba(34,197,94,0.5)}50%{opacity:.5;box-shadow:none}}

.cert-body{position:relative}
.cert-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px}
.cert-field-label{font-size:8px;color:rgba(34,197,94,0.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px}
.cert-field-value{font-size:13px;font-weight:600;color:var(--text)}
.cert-field-sub{font-size:9px;color:rgba(255,255,255,0.35);margin-top:1px}

.cert-hash-box{background:rgba(0,0,0,0.3);border:1px solid rgba(34,197,94,0.12);border-radius:4px;padding:8px 10px;margin-bottom:12px}
.cert-hash-label{font-size:8px;color:rgba(34,197,94,0.4);text-transform:uppercase;letter-spacing:.5px;margin-bottom:3px}
.cert-hash-value{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--accent-light);word-break:break-all;line-height:1.4;letter-spacing:.3px}
.cert-hash-meta{display:flex;gap:10px;margin-top:4px;font-size:8px;color:rgba(255,255,255,0.25)}

.cert-checks{display:flex;gap:14px;font-size:9px;color:rgba(255,255,255,0.4)}
.cert-checks .check{color:var(--accent-light)}
.cert-checks.invalid .check{color:var(--danger)}

.cert-msg{font-size:10px;color:rgba(255,255,255,0.5);margin-top:10px;line-height:1.5;padding-top:10px;border-top:1px solid rgba(34,197,94,0.08)}

/* INVALID panel override */
.cert-panel.invalid{background:linear-gradient(135deg,#1a0a0a 0%,#180d0d 50%,#1a0a0a 100%);border-color:rgba(239,68,68,0.3)}
.cert-panel.invalid::after{background:linear-gradient(90deg,transparent 0%,rgba(239,68,68,0.4) 50%,transparent 100%)}

/* ERROR */
.error-card{display:none;background:var(--bg-card);border:1px solid var(--border);border-radius:6px;padding:28px;text-align:center}
.error-icon{font-size:28px;margin-bottom:8px;opacity:.3}
.error-title{font-size:14px;font-weight:600;margin-bottom:4px}
.error-sub{font-size:11px;color:var(--text-muted)}

/* HOW */
.how-section{margin-top:36px;padding-top:28px;border-top:1px solid var(--border)}
.how-title{font-size:13px;font-weight:600;margin-bottom:12px}
.how-steps{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--border);border-radius:6px;overflow:hidden}
.how-step{padding:14px;background:var(--bg-card)}
.how-num{font-size:16px;color:var(--accent-light);opacity:.5;margin-bottom:6px;font-family:'JetBrains Mono',monospace}
.how-head{font-size:11px;font-weight:600;margin-bottom:3px}
.how-desc{font-size:10px;color:var(--text-muted);line-height:1.5}

.footer{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;font-size:10px;color:var(--text-muted)}

.spinner{display:none;width:16px;height:16px;border:2px solid rgba(255,255,255,0.2);border-top-color:#fff;border-radius:50%;animation:spin .5s linear infinite;margin:0 auto}
@keyframes spin{to{transform:rotate(360deg)}}

@media(max-width:640px){
    .cert-grid{grid-template-columns:1fr}
    .how-steps{grid-template-columns:1fr}
    .search-row{flex-direction:column}
    .search-btn{width:100%}
    .container{padding:28px 16px}
}
</style>
</head>
<body>

<nav class="nav">
    <a href="/" class="nav-brand">
        <div style="width:28px;height:28px;flex-shrink:0">
            <svg width="28" height="28" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="18" cy="18" r="17" fill="white"/>
                <path d="M16 10L20 10L20 26L16 26L16 14L13 14L13 10L16 10Z" fill="#0a0a0a"/>
            </svg>
        </div>
        <span class="nav-logo">ONTO</span>
        <span class="nav-sep">/</span>
        <span class="nav-page">Verify</span>
    </a>
    <div class="signal-hash mono">
        <span style="color:#606060">σ(t) =</span>
        <span id="navSigBytes" style="color:#15803d;opacity:0.6"></span>
        <span style="color:#606060">... 104 bytes</span>
    </div>
</nav>

<div class="container">
    <h1 class="page-title">Verify Certificate</h1>
    <p class="page-sub">ONTO GOLD is an epistemic discipline layer for production AI systems. This page verifies that a model <strong>operates under discipline</strong> — reducing over-confidence, enforcing source citation, marking uncertainty. Like SSL verifies encryption, not quality.</p>

    <div class="search-card">
        <label class="search-label">Certificate Hash</label>
        <div class="search-row">
            <input class="search-input" id="proof-input" type="text"
                   placeholder="e.g. a1b2c3d4e5f67890abcdef..." 
                   maxlength="64" spellcheck="false" autocomplete="off">
            <button class="search-btn" id="verify-btn" onclick="verifyProof()">
                <span id="btn-text">Verify</span>
                <div class="spinner" id="btn-spinner"></div>
            </button>
        </div>
        <div class="search-hint">64-character hex hash from certificate, portal, or QR code. Also: <code>/verify/?hash=...</code></div>
    </div>

    <!-- RESULT: VERIFIED -->
    <div class="result" id="result-card">
        <div class="cert-panel" id="cert-panel">
            <div class="cert-header">
                <div class="cert-title">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
                    <span>ONTO VERIFIED</span>
                </div>
                <div class="cert-badge badge-active" id="cert-badge">
                    <span class="dot"></span>
                    <span id="badge-text">ACTIVE</span>
                </div>
            </div>
            <div class="cert-body">
                <div class="cert-grid">
                    <div>
                        <div class="cert-field-label">Organization</div>
                        <div class="cert-field-value" id="r-org">—</div>
                        <div class="cert-field-sub" id="r-model">—</div>
                    </div>
                    <div>
                        <div class="cert-field-label">Active since</div>
                        <div class="cert-field-value" id="r-since">—</div>
                        <div class="cert-field-sub" id="r-proxy-status">—</div>
                    </div>
                </div>

                <div class="cert-hash-box">
                    <div class="cert-hash-label">Hash · Ed25519 · 104b · SHA-256</div>
                    <div class="cert-hash-value" id="r-hash">—</div>
                    <div class="cert-hash-meta">
                        <span>Ed25519 (RFC 8032)</span>
                        <span id="r-pubkey-short">—</span>
                        <span id="r-cert-url">—</span>
                    </div>
                </div>

                <div class="cert-checks" id="cert-checks">
                    <span><span class="check">✓</span> PROXY</span>
                    <span><span class="check">✓</span> GOLD</span>
                    <span><span class="check">✓</span> SIGNATURE</span>
                    <span><span class="check">✓</span> CHAIN</span>
                </div>

                <div class="cert-msg">This model operates under ONTO GOLD epistemic discipline layer. Certificate is valid while proxy connection is active. Proxy disconnected → certificate suspended instantly.</div>
            </div>
        </div>
    </div>

    <!-- ERROR -->
    <div class="error-card" id="error-card">
        <div class="error-icon">∅</div>
        <div class="error-title" id="error-title">Certificate not found</div>
        <div class="error-sub" id="error-sub">This hash does not match any certificate in the ONTO registry.</div>
    </div>

    <!-- HOW -->
    <div class="how-section">
        <div class="how-title">How ONTO Verification Works</div>
        <div class="how-steps">
            <div class="how-step">
                <div class="how-num">01</div>
                <div class="how-head">Connect</div>
                <div class="how-desc">Organization connects AI model via API key. GOLD layer injected into every request through proxy.</div>
            </div>
            <div class="how-step">
                <div class="how-num">02</div>
                <div class="how-head">Certify</div>
                <div class="how-desc">Ed25519 signs the connection fact. Certificate hash issued. Active while proxy connected.</div>
            </div>
            <div class="how-step">
                <div class="how-num">03</div>
                <div class="how-head">Verify</div>
                <div class="how-desc">Anyone — regulators, clients, auditors — verifies live status here. No login required.</div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <span>© ONTO Standard</span>
    <span>ONTO does not guarantee accuracy. Not responsible for decisions made by AI systems or their operators.</span>
</footer>

<script>
const API = 'https://api.ontostandard.org';

// Auto-fill from URL
(function() {
    const params = new URLSearchParams(window.location.search);
    const h = params.get('hash') || params.get('h') || window.location.hash.replace('#', '');
    if (h && h.length === 64) {
        document.getElementById('proof-input').value = h;
        setTimeout(verifyProof, 300);
    }
})();

document.getElementById('proof-input').addEventListener('keydown', e => {
    if (e.key === 'Enter') verifyProof();
});

async function verifyProof() {
    const input = document.getElementById('proof-input');
    let hash = input.value.trim().toLowerCase();
    
    // Strip common prefixes users might paste
    if (hash.startsWith('hash=')) hash = hash.substring(5);
    if (hash.startsWith('h=')) hash = hash.substring(2);
    input.value = hash;
    
    if (!hash) { input.focus(); return; }
    if (hash.length !== 64 || !/^[0-9a-f]+$/.test(hash)) {
        showError('Invalid format', 'Certificate hash must be exactly 64 hexadecimal characters.');
        return;
    }
    
    const btn = document.getElementById('verify-btn');
    const btnText = document.getElementById('btn-text');
    const spinner = document.getElementById('btn-spinner');
    btn.disabled = true;
    btnText.style.display = 'none';
    spinner.style.display = 'block';
    hideResults();
    
    try {
        const resp = await fetch(`${API}/v1/verify/${hash}`);
        const data = await resp.json();
        
        if (!resp.ok || !data.verified) {
            showError('Certificate not found', 'This hash does not match any certificate in the ONTO registry.');
            return;
        }
        
        showResult(data, hash);
        history.replaceState(null, '', `/verify/?hash=${hash}`);
        
    } catch (e) {
        showError('Connection failed', 'Cannot reach ONTO API. Please try again.');
    } finally {
        btn.disabled = false;
        btnText.style.display = 'inline';
        spinner.style.display = 'none';
    }
}

function showResult(d, hash) {
    const panel = document.getElementById('cert-panel');
    const badge = document.getElementById('cert-badge');
    const badgeText = document.getElementById('badge-text');
    const checks = document.getElementById('cert-checks');
    
    const isActive = d.proxy_active !== false && d.signature_valid !== false;
    
    if (isActive) {
        panel.className = 'cert-panel';
        badge.className = 'cert-badge badge-active';
        badgeText.textContent = 'ACTIVE';
        checks.className = 'cert-checks';
    } else {
        panel.className = 'cert-panel invalid';
        badge.className = 'cert-badge badge-suspended';
        badgeText.textContent = 'SUSPENDED';
        checks.className = 'cert-checks invalid';
    }
    
    document.getElementById('r-org').textContent = d.organization || d.model_name || '—';
    document.getElementById('r-model').textContent = (d.model_id || d.model_name || '—') + (d.provider ? ' · ' + d.provider : '');
    
    if (d.connected_since || d.evaluated_at || d.proof_timestamp) {
        const ts = d.connected_since || d.evaluated_at;
        const dt = ts ? new Date(typeof ts === 'number' ? ts * 1000 : ts) : new Date(d.proof_timestamp * 1000);
        document.getElementById('r-since').textContent = dt.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }
    
    document.getElementById('r-proxy-status').textContent = 
        (isActive ? 'Proxy: active' : 'Proxy: disconnected') + ' · GOLD: ' + (isActive ? 'injected' : 'inactive');
    
    document.getElementById('r-hash').textContent = hash || d.proof_hash || '—';
    document.getElementById('r-pubkey-short').textContent = d.public_key_hex ? d.public_key_hex.slice(0, 16) + '...' : '—';
    document.getElementById('r-cert-url').textContent = 'ontostandard.org/verify/?hash=' + (hash || '').slice(0, 8) + '...';
    
    document.getElementById('result-card').style.display = 'block';
}

function showError(title, sub) {
    document.getElementById('error-title').textContent = title;
    document.getElementById('error-sub').textContent = sub;
    document.getElementById('error-card').style.display = 'block';
    document.getElementById('result-card').style.display = 'none';
}

function hideResults() {
    document.getElementById('result-card').style.display = 'none';
    document.getElementById('error-card').style.display = 'none';
}

// Signal hash in nav
(function(){
    const el = document.getElementById('navSigBytes');
    if (!el) return;
    function rHex(n){ let s=''; for(let i=0;i<n;i++) s+='0123456789abcdef'[Math.random()*16|0]; return s; }
    function update(){ el.textContent = rHex(12); }
    update(); setInterval(update, 2000);
})();
</script>
</body>
</html>
