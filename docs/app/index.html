<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ONTO ‚Äî Portal</title>
<meta name="description" content="ONTO Measurement Portal ‚Äî Evaluate your AI model's epistemic calibration">
<meta name="robots" content="noindex, nofollow">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* === VARIABLES ‚Äî ONTO Design System v3.0 === */
:root {
    --bg: #0a0a0a;
    --bg-secondary: #121212;
    --bg-card: #1a1a1a;
    --bg-elevated: #242424;
    --border: #333333;
    --text: #fafafa;
    --text-secondary: #a0a0a0;
    --text-muted: #606060;
    --safe: #15803d;
    --safe-subtle: rgba(21, 128, 61, 0.15);
    --danger: #dc2626;
    --danger-subtle: rgba(220, 38, 38, 0.15);
    --warning: #d97706;
    --warning-subtle: rgba(217, 119, 6, 0.15);
    --radius: 6px;
    --mono: 'JetBrains Mono', monospace;
    --sans: 'Inter', -apple-system, sans-serif;
}
[data-theme="light"] {
    --bg: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-card: #ffffff;
    --bg-elevated: #f3f4f6;
    --border: #e5e7eb;
    --text: #111827;
    --text-secondary: #6b7280;
    --text-muted: #9ca3af;
}

/* === RESET === */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 14px; }
body { font-family: var(--sans); background: var(--bg); color: var(--text); line-height: 1.5; min-height: 100vh; overflow-x: hidden; }
a { color: var(--safe); text-decoration: none; cursor: pointer; }
a:hover { text-decoration: underline; }
button { font-family: inherit; cursor: pointer; border: none; background: none; color: inherit; }
input, select, textarea { font-family: inherit; }
.hidden { display: none !important; }

/* === TOAST === */
.toast-container { position: fixed; top: 16px; right: 16px; z-index: 9999; display: flex; flex-direction: column; gap: 8px; }
.toast { padding: 10px 16px; border-radius: var(--radius); font-size: 12px; font-weight: 500; animation: toastIn 0.3s ease; max-width: 360px; }
.toast.info { background: var(--bg-elevated); border: 1px solid var(--border); color: var(--text); }
.toast.success { background: var(--safe-subtle); border: 1px solid var(--safe); color: var(--safe); }
.toast.error { background: rgba(220, 38, 38, 0.1); border: 1px solid rgba(220, 38, 38, 0.3); color: var(--danger); }
@keyframes toastIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

/* === BUTTONS === */
.btn { display: inline-flex; align-items: center; justify-content: center; padding: 8px 20px; border-radius: var(--radius); font-size: 12px; font-weight: 500; transition: all 0.15s; }
.btn-primary { background: var(--safe-subtle); color: var(--safe); border: 1px solid var(--safe); }
.btn-primary:hover { background: var(--safe); color: #fff; }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-outline { border: 1px solid var(--border); color: var(--text-secondary); background: transparent; }
.btn-outline:hover { border-color: var(--safe); color: var(--safe); }
.btn-danger { border: 1px solid rgba(220,38,38,0.3); color: var(--danger); background: transparent; font-size: 11px; padding: 4px 10px; }
.btn-danger:hover { background: rgba(220,38,38,0.08); }
.btn-upgrade { background: var(--safe-subtle); color: var(--safe); border: 1px solid var(--safe); padding: 8px 20px; border-radius: var(--radius); font-size: 12px; font-weight: 500; }
.btn-upgrade:hover { background: var(--safe); color: #fff; }
.spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 0.6s linear infinite; margin-right: 6px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* === FORM === */
.form-group { margin-bottom: 14px; }
.form-label { display: block; font-size: 11px; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
.form-input { width: 100%; padding: 8px 12px; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 13px; transition: border-color 0.15s; }
.form-input:focus { outline: none; border-color: var(--safe); }
.form-input::placeholder { color: var(--text-muted); }
select.form-input { appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%236b7280' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; padding-right: 28px; }
.password-wrapper { position: relative; }
.password-toggle { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); color: var(--text-muted); padding: 4px; }

/* === AUTH SCREEN === */
.auth-container { display: flex; min-height: 100vh; }
.auth-hero { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px; background: var(--bg-card); border-right: 1px solid var(--border); }
.auth-hero-logo { font-size: 28px; font-weight: 700; letter-spacing: -0.5px; margin-bottom: 32px; }
.auth-hero-logo span { color: var(--safe); }
.auth-hero-stats { display: flex; gap: 32px; }
.auth-hero-stat { text-align: center; }
.auth-hero-stat strong { font-size: 22px; font-weight: 700; font-variant-numeric: tabular-nums; display: block; }
.auth-hero-stat span { font-size: 11px; color: var(--text-muted); }
.auth-form-side { flex: 1; display: flex; align-items: center; justify-content: center; padding: 40px; }
.auth-card { width: 100%; max-width: 380px; }
.auth-title { font-size: 20px; font-weight: 600; margin-bottom: 4px; }
.auth-subtitle { font-size: 12px; color: var(--text-muted); margin-bottom: 20px; }
.auth-switch { font-size: 12px; color: var(--text-muted); margin-top: 16px; text-align: center; }
.auth-switch a { color: var(--safe); cursor: pointer; }
.terms-container { max-height: 140px; overflow-y: auto; padding: 10px; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); margin-bottom: 12px; font-size: 11px; color: var(--text-secondary); line-height: 1.5; }
.checkbox-group { display: flex; align-items: flex-start; gap: 8px; margin-bottom: 14px; font-size: 12px; color: var(--text-secondary); }
.checkbox-group input[type="checkbox"] { margin-top: 2px; accent-color: var(--safe); }
.otp-inputs { display: flex; gap: 8px; justify-content: center; margin: 20px 0; }
.otp-input { width: 44px; height: 48px; text-align: center; font-size: 20px; font-weight: 600; font-family: var(--mono); background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); }
.otp-input:focus { outline: none; border-color: var(--safe); }

/* === LAYOUT === */
.app-layout { display: flex; min-height: 100vh; }
.sidebar { width: 220px; background: var(--bg-card); border-right: 1px solid var(--border); display: flex; flex-direction: column; position: fixed; top: 0; bottom: 0; left: 0; z-index: 100; }
.sidebar-header { padding: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
.sidebar-close { display: none; }
.logo { font-size: 16px; font-weight: 700; letter-spacing: -0.5px; }
.logo span { color: var(--safe); }
.sidebar-nav { padding: 12px 8px; flex: 1; overflow-y: auto; }
.nav-item { display: flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: 4px; color: var(--text-secondary); cursor: pointer; transition: all 0.15s; font-size: 12px; font-weight: 500; text-decoration: none; }
.nav-item:hover { background: var(--bg-elevated); color: var(--text); text-decoration: none; }
.nav-item.active { background: var(--safe-subtle); color: var(--safe); }
.nav-item svg { width: 16px; height: 16px; flex-shrink: 0; }
.nav-divider { height: 1px; background: var(--border); margin: 8px 12px; }
.sidebar-footer { padding: 12px 16px; border-top: 1px solid var(--border); }
.sidebar-user { display: flex; align-items: center; gap: 10px; }
.user-avatar { width: 28px; height: 28px; background: var(--safe-subtle); color: var(--safe); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; }
.user-info { flex: 1; min-width: 0; }
.user-name { font-size: 12px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.user-tier { font-size: 10px; color: var(--text-muted); }
.main-content { margin-left: 220px; flex: 1; padding: 24px; max-width: 960px; }
.page { display: none; }
.page.active { display: block; }

/* === MOBILE === */
.mobile-header { display: none; padding: 12px 16px; background: var(--bg-card); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 90; }
.hamburger { background: none; border: none; color: var(--text); padding: 4px; }
.mobile-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 99; }
@media (max-width: 768px) {
    .mobile-header { display: flex; align-items: center; gap: 12px; }
    .sidebar { transform: translateX(-100%); transition: transform 0.2s; }
    .sidebar.open { transform: translateX(0); }
    .sidebar-close { display: block; }
    .main-content { margin-left: 0; padding: 16px; }
    .mobile-overlay.active { display: block; }
    .auth-container { flex-direction: column; }
    .auth-hero { display: none; }
    .auth-form-side { padding: 24px 16px; }
    .stats-grid { grid-template-columns: repeat(2, 1fr) !important; }
}

/* === CARDS === */
.card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 16px; }
.card-head { font-size: 11px; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }

/* === STATS === */
.stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
.stat-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px 16px; }
.stat-label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
.stat-value { font-size: 22px; font-weight: 700; font-variant-numeric: tabular-nums; }
.stat-sub { font-size: 11px; color: var(--text-muted); }

/* === MODEL CARDS === */
.models-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
.model-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 10px; transition: border-color 0.15s; }
.model-card:hover { border-color: var(--safe); }
.model-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
.model-name { font-size: 14px; font-weight: 600; }
.model-provider { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.model-score { text-align: right; }
.model-composite { font-size: 24px; font-weight: 700; font-variant-numeric: tabular-nums; font-family: var(--mono); }
.model-grade { display: inline-block; padding: 2px 8px; border-radius: 3px; font-size: 11px; font-weight: 600; margin-top: 2px; }
.grade-a { background: var(--safe-subtle); color: var(--safe); }
.grade-b { background: rgba(59, 130, 246, 0.12); color: #3b82f6; }
.grade-c { background: var(--warning-subtle); color: var(--warning); }
.grade-d { background: var(--danger-subtle); color: var(--danger); }
.grade-f { background: rgba(220, 38, 38, 0.2); color: var(--danger); }
.model-meta { font-size: 11px; color: var(--text-muted); margin-bottom: 10px; }
.model-actions { display: flex; gap: 8px; }

/* === METRICS BREAKDOWN === */
.metrics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 12px 0; }
.metric-item { padding: 10px; background: var(--bg); border-radius: var(--radius); }
.metric-name { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px; margin-bottom: 4px; }
.metric-value { font-size: 16px; font-weight: 600; font-family: var(--mono); }
.metric-bar-wrap { height: 3px; background: var(--border); border-radius: 2px; margin-top: 4px; }
.metric-bar { height: 100%; background: var(--safe); border-radius: 2px; transition: width 0.6s ease; }

/* === SIGNAL PANEL === */
.signal-panel { background: linear-gradient(135deg, #0a1a0f 0%, #0d2818 50%, #0a1a0f 100%); border: 1px solid rgba(21, 128, 61, 0.3); border-radius: var(--radius); padding: 16px 20px; margin-bottom: 16px; position: relative; overflow: hidden; }
.signal-panel::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent 0%, rgba(21, 128, 61, 0.8) 50%, transparent 100%); animation: scanline 6s linear infinite; pointer-events: none; }
@keyframes scanline { from { transform: translateX(-100%); } to { transform: translateX(100%); } }
.signal-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.signal-title { display: flex; align-items: center; gap: 10px; font-size: 13px; font-weight: 600; }
.signal-live { display: flex; align-items: center; gap: 6px; padding: 3px 8px; background: rgba(21, 128, 61, 0.15); border-radius: 12px; font-size: 10px; font-weight: 600; color: #15803d; text-transform: uppercase; letter-spacing: 0.5px; }
.signal-dot { width: 6px; height: 6px; background: #15803d; border-radius: 50%; animation: pulse 2s infinite; box-shadow: 0 0 6px #15803d; }
@keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
.signal-body { margin-top: 14px; }
.signal-id { font-size: 20px; font-weight: 700; color: #15803d; font-family: var(--mono); margin-bottom: 4px; text-shadow: 0 0 20px rgba(21, 128, 61, 0.3); }
.signal-hash-text { font-size: 11px; font-family: var(--mono); color: var(--text-muted); word-break: break-all; }
.signal-metrics-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 12px; }
.signal-metric { text-align: center; padding: 8px; background: rgba(0,0,0,0.2); border-radius: var(--radius); border: 1px solid rgba(21, 128, 61, 0.1); }
.signal-metric-val { font-size: 13px; font-weight: 600; color: #15803d; font-family: var(--mono); }
.signal-metric-label { font-size: 9px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }

/* === REPORTS === */
.report-row { display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid var(--border); }
.report-row:last-child { border-bottom: none; }
.report-icon { font-size: 16px; opacity: 0.6; }
.report-info { flex: 1; min-width: 0; }
.report-title { font-size: 12px; font-weight: 500; }
.report-date { font-size: 11px; color: var(--text-muted); }
.report-grade { font-size: 12px; font-weight: 600; font-family: var(--mono); width: 28px; text-align: center; }
.report-actions { display: flex; gap: 6px; }
.report-actions button { font-size: 11px; color: var(--safe); padding: 2px 8px; }

/* === EMPTY STATE === */
.empty-state { text-align: center; padding: 40px 24px; }
.empty-icon { margin-bottom: 12px; color: var(--border); }
.empty-title { font-size: 14px; font-weight: 500; color: var(--text-secondary); margin-bottom: 4px; }
.empty-desc { font-size: 12px; color: var(--text-muted); margin-bottom: 16px; }

/* === CONNECT MODEL CARD === */
.connect-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; margin-bottom: 16px; }
.connect-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 16px; }
.connect-option { padding: 16px; border: 1px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: all 0.15s; text-align: center; }
.connect-option:hover { border-color: var(--safe); background: var(--safe-subtle); }
.connect-option-icon { font-size: 24px; margin-bottom: 8px; }
.connect-option-title { font-size: 12px; font-weight: 600; margin-bottom: 4px; }
.connect-option-desc { font-size: 11px; color: var(--text-muted); line-height: 1.4; }

/* === MODAL === */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 200; display: none; align-items: center; justify-content: center; }
.modal-overlay.active { display: flex; }
.modal { background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; width: 100%; max-width: 480px; max-height: 90vh; overflow-y: auto; padding: 24px; }
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.modal-header h2 { font-size: 16px; font-weight: 600; }
.modal-close { color: var(--text-muted); padding: 4px; font-size: 18px; }

/* === CODE BLOCK === */
.code-block { background: #1e293b; color: #e2e8f0; padding: 12px 16px; border-radius: var(--radius); font-size: 12px; font-family: var(--mono); overflow-x: auto; line-height: 1.6; margin-bottom: 12px; }
.code-block .kw { color: #7dd3fc; }
.code-block .str { color: #fde68a; }
.code-block .cmt { color: #94a3b8; }

/* === KEY ROW === */
.key-row { display: flex; gap: 8px; align-items: center; margin-bottom: 8px; }
.key-input { flex: 1; padding: 8px 12px; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 12px; font-family: var(--mono); }
.key-meta { font-size: 11px; color: var(--text-muted); display: flex; gap: 16px; }

/* === TIER CARDS === */
.tiers-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.tier-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; }
.tier-name { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
.tier-price { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
.tier-price span { font-size: 13px; font-weight: 400; color: var(--text-muted); }
.tier-desc { font-size: 12px; color: var(--text-secondary); margin-bottom: 16px; }
.tier-list { list-style: none; margin-bottom: 20px; }
.tier-list li { font-size: 12px; color: var(--text-secondary); padding: 4px 0; padding-left: 16px; position: relative; }
.tier-list li::before { content: '¬∑'; position: absolute; left: 4px; color: var(--safe); font-weight: 700; }
.btn-tier { width: 100%; padding: 10px; border-radius: var(--radius); font-size: 12px; font-weight: 500; }
.btn-tier:not(.current) { background: var(--safe-subtle); border: 1px solid var(--safe); color: var(--safe); }
.btn-tier:not(.current):hover { background: var(--safe); color: #fff; }
.btn-tier.current { background: var(--bg-elevated); color: var(--text-muted); cursor: default; }
@media (max-width: 768px) { .tiers-grid { grid-template-columns: 1fr; } .connect-options { grid-template-columns: 1fr; } }

/* === SETTINGS === */
.settings-section { margin-bottom: 24px; }
.settings-section h3 { font-size: 11px; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; }
.info-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--border); font-size: 12px; }
.info-row:last-child { border-bottom: none; }
.info-key { color: var(--text-muted); }
.info-val { color: var(--text-secondary); font-weight: 500; }

/* === AUTH MENU (mobile) === */
.auth-menu { position: fixed; top: 0; right: 0; bottom: 0; width: 280px; background: var(--bg-card); border-left: 1px solid var(--border); z-index: 300; transform: translateX(100%); transition: transform 0.2s; }
.auth-menu.open { transform: translateX(0); }
.auth-menu-header { padding: 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
.auth-menu-close { color: var(--text-muted); }
.auth-menu-nav { padding: 12px 8px; }
.auth-menu-item { display: block; padding: 10px 12px; color: var(--text-secondary); font-size: 13px; border-radius: 4px; text-decoration: none; }
.auth-menu-item:hover { background: var(--bg-elevated); color: var(--text); text-decoration: none; }
.auth-menu-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 299; display: none; }
.auth-menu-overlay.active { display: block; }

/* === UTILITY === */
.sidebar, .nav-item, button { user-select: none; -webkit-user-select: none; }
.section-block { margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.section-block:last-child { border-bottom: none; }
.section-label { font-size: 10px; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px; }
.section-text { font-size: 12px; color: var(--text-secondary); }
</style>
</head>
<body>

<!-- TOAST -->
<div class="toast-container" id="toast-container"></div>

<!-- MOBILE HEADER -->
<div class="mobile-header">
    <button class="hamburger" onclick="toggleMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
    </button>
    <div class="logo">ONT<span>O</span></div>
</div>

<!-- AUTH MENU (mobile burger on auth screen) -->
<div class="auth-menu" id="auth-menu">
    <div class="auth-menu-header">
        <div class="logo">ONT<span>O</span></div>
        <button class="auth-menu-close" onclick="closeAuthMenu()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
    </div>
    <nav class="auth-menu-nav">
        <a href="/" class="auth-menu-item">Home</a>
        <a href="/docs/" class="auth-menu-item">Documentation</a>
        <a href="/docs/#terms" class="auth-menu-item" style="font-size:12px;color:var(--text-muted);padding-left:20px">Terms of Service</a>
        <a href="/docs/#privacy" class="auth-menu-item" style="font-size:12px;color:var(--text-muted);padding-left:20px">Privacy Policy</a>
    </nav>
</div>
<div class="auth-menu-overlay" id="auth-menu-overlay" onclick="closeAuthMenu()"></div>
<div class="mobile-overlay" id="mobile-overlay" onclick="toggleMobile()"></div>

<!-- ==================== AUTH SCREEN ==================== -->
<div class="auth-container" id="auth-screen">
    <div class="auth-hero">
        <div class="auth-hero-logo">ONT<span>O</span></div>
        <p style="font-size:13px;color:var(--text-secondary);max-width:320px;text-align:center;margin-bottom:32px">
            Epistemic discipline measurement for AI models. Evaluate calibration. Get signed reports.
        </p>
        <div class="auth-hero-stats">
            <div class="auth-hero-stat">
                <strong>11</strong>
                <span>Models Tested</span>
            </div>
            <div class="auth-hero-stat">
                <strong>1,100</strong>
                <span>Responses Scored</span>
            </div>
            <div class="auth-hero-stat">
                <strong>+915%</strong>
                <span>Proven Improvement</span>
            </div>
        </div>
    </div>
    <div class="auth-form-side">
    <div class="auth-card">
        <!-- LOGIN -->
        <div id="login-form">
            <h1 class="auth-title">Welcome back</h1>
            <p class="auth-subtitle">Sign in to your account</p>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="login-email" placeholder="you@company.com">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <div class="password-wrapper">
                    <input type="password" class="form-input" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    <button type="button" class="password-toggle" onclick="togglePassword('login-password', this)"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
                </div>
            </div>
            <button class="btn btn-primary" style="width:100%" id="login-btn" onclick="handleLogin(this)">Sign In</button>
            <p class="auth-switch">Don't have an account? <a onclick="showRegister()">Create one</a></p>
        </div>

        <!-- REGISTER -->
        <div id="register-form" class="hidden">
            <h1 class="auth-title">Create Account</h1>
            <p class="auth-subtitle">Free tier ‚Äî no credit card required</p>
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-input" id="reg-name" placeholder="John Doe">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="reg-email" placeholder="you@company.com">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <div class="password-wrapper">
                    <input type="password" class="form-input" id="reg-password" placeholder="Min 8 characters">
                    <button type="button" class="password-toggle" onclick="togglePassword('reg-password', this)"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
                </div>
            </div>
            <div class="terms-container">
                <p><strong>Terms of Service.</strong> By creating an account you agree to the ONTO Terms of Service, Privacy Policy, and Acceptable Use Policy.</p>
                <p><strong>Acceptable Use.</strong> You may use the ONTO platform to evaluate AI model outputs, track epistemic calibration, and obtain measurement reports. Automated abuse, reverse engineering of scoring algorithms, and redistribution of evaluation results without attribution are prohibited.</p>
                <p><strong>Data.</strong> Model outputs submitted for evaluation are processed and may be stored for quality assurance. API keys you provide are used only for evaluation and never stored after the evaluation session.</p>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="terms-agree" onchange="document.getElementById('register-btn').disabled = !this.checked">
                <label for="terms-agree">I agree to the Terms of Service and Privacy Policy</label>
            </div>
            <button class="btn btn-primary" style="width:100%" id="register-btn" onclick="handleRegister(this)" disabled>Create Account</button>
            <p class="auth-switch">Already have an account? <a onclick="showLogin()">Sign in</a></p>
        </div>

        <!-- OTP VERIFICATION -->
        <div id="verify-pending" class="hidden">
            <div style="text-align:center;margin-bottom:16px">
                <svg viewBox="0 0 24 24" width="36" height="36" fill="none" stroke="var(--safe)" stroke-width="1.5"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            <h1 class="auth-title" style="text-align:center">Enter verification code</h1>
            <p class="auth-subtitle" style="text-align:center">We sent a 6-digit code to</p>
            <p style="text-align:center;font-size:13px;font-weight:500;margin-bottom:16px" id="verify-email-display"></p>
            <div class="otp-inputs" id="otp-container">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" inputmode="numeric" pattern="[0-9]">
            </div>
            <button class="btn btn-primary" style="width:100%" id="verify-btn" onclick="handleVerifyOTP(this)">Verify</button>
            <p style="text-align:center;margin-top:12px;font-size:12px;color:var(--text-muted)">
                Didn't receive? <a onclick="resendVerification()" id="resend-link">Resend code</a>
            </p>
        </div>

        <!-- VERIFY SUCCESS -->
        <div id="verify-success" class="hidden">
            <div style="text-align:center;padding:20px 0">
                <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="var(--safe)" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                <h2 style="margin-top:16px;font-size:18px">Email Verified</h2>
                <p style="color:var(--text-muted);font-size:12px;margin-top:4px">Your account is ready.</p>
                <button class="btn btn-primary" style="margin-top:16px" onclick="showDashboard()">Open Dashboard</button>
            </div>
        </div>
    </div>
    </div>
</div>

<!-- ==================== APP LAYOUT ==================== -->
<div class="app-layout" id="app-layout" style="display:none">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">ONT<span>O</span></div>
            <button class="sidebar-close" onclick="toggleMobile()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item active" onclick="showPage('dashboard', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                Dashboard
            </div>
            <div class="nav-divider"></div>
            <div class="nav-item" onclick="showPage('sdk', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16,18 22,12 16,6"/><polyline points="8,6 2,12 8,18"/></svg>
                API & SDK
            </div>
            <div class="nav-item" onclick="showPage('billing', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
                Billing
            </div>
            <div class="nav-item" onclick="showPage('settings', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/></svg>
                Account
            </div>
            <div class="nav-divider"></div>
            <a class="nav-item" href="/docs/" target="_blank" style="color: var(--text-muted);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14,2 14,8 20,8"/></svg>
                Docs ‚Üó
            </a>
            <a class="nav-item" href="/verify/" target="_blank" style="color: var(--text-muted);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11.5 14.5 16 9"/></svg>
                Verify ‚Üó
            </a>
            <div class="nav-item" onclick="toggleTheme()" style="color: var(--text-muted);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/></svg>
                Theme
            </div>
            <div class="nav-item" onclick="handleLogout()" style="color: var(--text-muted);">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16,17 21,12 16,7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                Sign Out
            </div>
        </nav>
        <div class="sidebar-footer">
            <div class="sidebar-user">
                <div class="user-avatar" id="user-avatar">J</div>
                <div class="user-info">
                    <div class="user-name" id="user-name">User</div>
                    <div class="user-tier" id="user-plan">Open</div>
                </div>
            </div>
        </div>
    </aside>

    <main class="main-content">

        <!-- ==================== DASHBOARD ==================== -->
        <div class="page active" id="page-dashboard">

            <!-- STATS BAR -->
            <div class="stats-grid" id="stats-bar">
                <div class="stat-card">
                    <div class="stat-label">Models</div>
                    <div style="display:flex;align-items:baseline;gap:6px">
                        <span class="stat-value" id="stat-models">0</span>
                        <span class="stat-sub">registered</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Avg Composite</div>
                    <div style="display:flex;align-items:baseline;gap:6px">
                        <span class="stat-value" id="stat-composite">‚Äî</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Evaluations</div>
                    <div style="display:flex;align-items:baseline;gap:6px">
                        <span class="stat-value" id="stat-evals">0</span>
                        <span class="stat-sub">total</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Grade</div>
                    <div style="display:flex;align-items:baseline;gap:6px">
                        <span class="stat-value" id="stat-grade">‚Äî</span>
                    </div>
                </div>
            </div>

            <!-- MY MODELS -->
            <div class="models-header">
                <div class="card-head">My Models</div>
                <button class="btn btn-outline" onclick="openAddModelModal()" id="add-model-btn" style="display:none">+ Add Model</button>
            </div>

            <!-- Empty state (no models) -->
            <div id="models-empty">
                <div class="connect-card">
                    <div style="font-size:15px;font-weight:600;margin-bottom:4px">Connect your first AI model</div>
                    <div style="font-size:12px;color:var(--text-secondary)">Choose how to evaluate. First evaluation is free.</div>
                    <div class="connect-options">
                        <div class="connect-option" onclick="openAddModelModal('api')">
                            <div class="connect-option-icon">üîë</div>
                            <div class="connect-option-title">API Key</div>
                            <div class="connect-option-desc">Paste your OpenAI / Claude / Gemini key. We send 100 questions automatically.</div>
                        </div>
                        <div class="connect-option" onclick="openAddModelModal('upload')">
                            <div class="connect-option-icon">üìÑ</div>
                            <div class="connect-option-title">Upload Responses</div>
                            <div class="connect-option-desc">Export your model's answers as CSV/JSON. We score them.</div>
                        </div>
                        <div class="connect-option" onclick="openAddModelModal('local')">
                            <div class="connect-option-icon">üíª</div>
                            <div class="connect-option-title">Local Evaluation</div>
                            <div class="connect-option-desc">Download evaluation kit. Run on your machine. Upload results.</div>
                        </div>
                    </div>
                </div>
                <div class="card" style="display:flex;justify-content:space-between;align-items:center">
                    <div>
                        <div style="font-size:13px;font-weight:500;margin-bottom:2px">Don't have an AI model?</div>
                        <div style="font-size:12px;color:var(--text-muted)">Download GOLD DIGEST to improve any AI you already use.</div>
                    </div>
                    <a class="btn btn-outline" href="/ONTO-GOLD-DIGEST_v1.0.md" download>Download GOLD DIGEST</a>
                </div>
            </div>

            <!-- Model cards (populated by JS) -->
            <div id="models-list" style="display:none"></div>

            <!-- SIGNAL PANEL (Proof Chain) -->
            <div class="signal-panel" id="signal-panel" style="display:none">
                <div class="signal-header" onclick="toggleSignalPanel()">
                    <div class="signal-title">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="#15803d" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
                        <span>Cryptographic Proof Chain</span>
                        <span style="font-size:11px;color:var(--text-muted);margin-left:8px">Ed25519 ¬∑ 104 bytes</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:10px">
                        <div class="signal-live" id="signal-live-badge">
                            <span class="signal-dot"></span>
                            <span>LIVE</span>
                        </div>
                        <svg id="signal-chevron" viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="var(--text-muted)" stroke-width="2" style="transition:transform 0.2s"><polyline points="6,9 12,15 18,9"/></svg>
                    </div>
                </div>
                <div class="signal-body" id="signal-body" style="display:none">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px">
                        <div>
                            <div class="signal-id" id="signal-id">‚Äî</div>
                            <div class="signal-hash-text" id="signal-hash">‚Äî</div>
                        </div>
                        <div style="text-align:right">
                            <div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px">NEXT</div>
                            <div style="font-size:22px;font-weight:700;color:#15803d;font-family:var(--mono)" id="signal-countdown">‚Äî</div>
                        </div>
                    </div>
                    <div class="signal-metrics-row">
                        <div class="signal-metric"><div class="signal-metric-val" id="sig-uptime">‚Äî</div><div class="signal-metric-label">Uptime</div></div>
                        <div class="signal-metric"><div class="signal-metric-val" id="sig-generated">‚Äî</div><div class="signal-metric-label">Generated</div></div>
                        <div class="signal-metric"><div class="signal-metric-val">104</div><div class="signal-metric-label">Packet</div></div>
                        <div class="signal-metric"><div class="signal-metric-val">ED25519</div><div class="signal-metric-label">Signature</div></div>
                    </div>
                </div>
            </div>

            <!-- LATEST REPORT (inline preview) -->
            <div class="card" id="latest-report" style="display:none">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
                    <div class="card-head">Latest Report</div>
                    <span style="font-size:11px;color:var(--text-muted)" id="report-date">‚Äî</span>
                </div>
                <div style="display:flex;align-items:center;gap:16px;margin-bottom:14px">
                    <div>
                        <div style="font-size:13px;font-weight:500" id="report-model-name">‚Äî</div>
                        <div style="font-size:11px;color:var(--text-muted)" id="report-model-provider">‚Äî</div>
                    </div>
                    <div style="margin-left:auto;text-align:right">
                        <div style="font-size:28px;font-weight:700;font-family:var(--mono)" id="report-composite">‚Äî</div>
                        <div class="model-grade" id="report-grade">‚Äî</div>
                    </div>
                </div>
                <!-- Metrics breakdown: QD SS UM CP VQ CONF -->
                <div class="metrics-grid" id="report-metrics">
                    <div class="metric-item">
                        <div class="metric-name">QD ¬∑ Quantification</div>
                        <div class="metric-value" id="rm-qd">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-qd" style="width:0"></div></div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-name">SS ¬∑ Source Specificity</div>
                        <div class="metric-value" id="rm-ss">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-ss" style="width:0"></div></div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-name">UM ¬∑ Uncertainty Marking</div>
                        <div class="metric-value" id="rm-um">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-um" style="width:0"></div></div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-name">CP ¬∑ Counterarguments</div>
                        <div class="metric-value" id="rm-cp">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-cp" style="width:0"></div></div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-name">VQ ¬∑ Vague Qualifiers</div>
                        <div class="metric-value" id="rm-vq">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-vq" style="width:0"></div></div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-name">CONF ¬∑ Confidence</div>
                        <div class="metric-value" id="rm-conf">‚Äî</div>
                        <div class="metric-bar-wrap"><div class="metric-bar" id="rb-conf" style="width:0"></div></div>
                    </div>
                </div>
                <div style="display:flex;gap:8px;margin-top:12px">
                    <button class="btn btn-outline" onclick="downloadReport()" style="font-size:11px;padding:6px 14px">üì• Download PDF</button>
                    <button class="btn btn-outline" onclick="verifyReport()" style="font-size:11px;padding:6px 14px">üîè Verify</button>
                    <button class="btn btn-outline" onclick="shareReport()" style="font-size:11px;padding:6px 14px">üîó Share</button>
                </div>
            </div>

            <!-- REPORTS TIMELINE -->
            <div class="card" id="reports-section" style="display:none">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                    <div class="card-head">All Reports</div>
                    <span style="font-size:11px;color:var(--text-muted)" id="reports-count">0 reports</span>
                </div>
                <div id="reports-list"></div>
            </div>
        </div>

        <!-- ==================== API & SDK ==================== -->
        <div class="page" id="page-sdk">
            <h1 style="font-size:18px;font-weight:600;margin-bottom:4px">API & SDK</h1>
            <p style="color:var(--text-muted);font-size:12px;margin-bottom:20px">Integrate ONTO evaluation into your pipeline</p>

            <!-- API Key -->
            <div class="card">
                <div class="card-head" style="margin-bottom:12px">API Key</div>
                <div class="key-row">
                    <input type="password" class="key-input" id="api-key-display" value="onto_sk_..." readonly>
                    <button class="btn btn-outline" onclick="toggleApiKeyVisibility()" id="toggle-key-btn" style="font-size:11px;padding:6px 12px">Show</button>
                    <button class="btn btn-outline" onclick="copyApiKey()" style="font-size:11px;padding:6px 12px">Copy</button>
                </div>
                <div class="key-meta" style="margin-top:6px">
                    <span id="key-created">Created: ‚Äî</span>
                    <span id="key-last-used">Last used: ‚Äî</span>
                </div>
                <button class="btn-danger" onclick="regenerateApiKey()" style="margin-top:10px">Regenerate Key</button>
            </div>

            <!-- Quick Start -->
            <div class="card">
                <div class="card-head" style="margin-bottom:12px">Quick Start</div>
                <div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Install</div>
                <div class="code-block"><code>pip install onto-standard</code></div>
                <div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Evaluate</div>
                <div class="code-block"><code><span class="kw">import</span> onto

client = onto.Client(api_key=<span class="str">"onto_sk_..."</span>)

result = client.evaluate(
    output=<span class="str">"AI response text"</span>,
    model_id=<span class="str">"your-model-id"</span>  <span class="cmt"># optional</span>
)

print(result.composite)    <span class="cmt"># 3.42</span>
print(result.grade)        <span class="cmt"># B</span>
print(result.metrics)      <span class="cmt"># {qd: 2.84, ss: 0.42, ...}</span></code></div>
                <div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">cURL</div>
                <div class="code-block"><code>curl -X POST https://api.ontostandard.org/v1/evaluate \
  -H "x-api-key: onto_sk_..." \
  -H "Content-Type: application/json" \
  -d '{"output": "AI response text"}'</code></div>
            </div>

            <!-- Tier Limits -->
            <div class="card">
                <div class="card-head" style="margin-bottom:12px">Rate Limits</div>
                <table style="width:100%;border-collapse:collapse;font-size:12px">
                    <tr style="border-bottom:1px solid var(--border)">
                        <th style="text-align:left;padding:8px;font-weight:500;color:var(--text-muted);font-size:10px;text-transform:uppercase">Tier</th>
                        <th style="text-align:left;padding:8px;font-weight:500;color:var(--text-muted);font-size:10px;text-transform:uppercase">Evaluations</th>
                        <th style="text-align:left;padding:8px;font-weight:500;color:var(--text-muted);font-size:10px;text-transform:uppercase">Models</th>
                        <th style="text-align:left;padding:8px;font-weight:500;color:var(--text-muted);font-size:10px;text-transform:uppercase">Reports</th>
                    </tr>
                    <tr style="border-bottom:1px solid var(--border)">
                        <td style="padding:8px;font-weight:500">Open</td>
                        <td style="padding:8px;color:var(--text-secondary)">1 free</td>
                        <td style="padding:8px;color:var(--text-secondary)">1 model</td>
                        <td style="padding:8px;color:var(--text-secondary)">Basic</td>
                    </tr>
                    <tr style="border-bottom:1px solid var(--border)">
                        <td style="padding:8px;font-weight:500">Standard</td>
                        <td style="padding:8px;color:var(--text-secondary)">Unlimited</td>
                        <td style="padding:8px;color:var(--text-secondary)">10 models</td>
                        <td style="padding:8px;color:var(--text-secondary)">Full + signed</td>
                    </tr>
                    <tr>
                        <td style="padding:8px;font-weight:500">Critical</td>
                        <td style="padding:8px;color:var(--text-secondary)">Unlimited</td>
                        <td style="padding:8px;color:var(--text-secondary)">Unlimited</td>
                        <td style="padding:8px;color:var(--text-secondary)">Custom + regulatory</td>
                    </tr>
                </table>
                <div style="margin-top:12px">
                    <a href="/docs/" target="_blank" style="font-size:12px">Full API documentation ‚Üí</a>
                </div>
            </div>
        </div>

        <!-- ==================== BILLING ==================== -->
        <div class="page" id="page-billing">
            <h1 style="font-size:18px;font-weight:600;margin-bottom:20px">Plans</h1>
            <div class="tiers-grid">
                <div class="tier-card" id="tier-open">
                    <div class="tier-name">Open</div>
                    <div class="tier-price">$0</div>
                    <div class="tier-desc">See your AI's epistemic calibration</div>
                    <ul class="tier-list">
                        <li>1 model</li>
                        <li>1 evaluation (free)</li>
                        <li>Basic report</li>
                        <li>Manual upload only</li>
                    </ul>
                    <button class="btn-tier current" id="btn-open" disabled>Current</button>
                </div>
                <div class="tier-card" id="tier-standard">
                    <div class="tier-name">Standard</div>
                    <div class="tier-price">$15K<span>/year</span></div>
                    <div class="tier-desc">Continuous monitoring and signed reports</div>
                    <ul class="tier-list">
                        <li>Up to 10 models</li>
                        <li>Monthly auto-evaluations</li>
                        <li>Full signed reports (PDF)</li>
                        <li>API + upload access</li>
                        <li>Drift alerts</li>
                        <li>Email support</li>
                    </ul>
                    <button class="btn-tier" id="btn-standard" onclick="contactSales('standard')">Contact Sales</button>
                </div>
                <div class="tier-card" id="tier-critical">
                    <div class="tier-name">Critical</div>
                    <div class="tier-price">$100K+<span>/year</span></div>
                    <div class="tier-desc">Enterprise-grade for regulated industries</div>
                    <ul class="tier-list">
                        <li>Everything in Standard</li>
                        <li>Unlimited models</li>
                        <li>Weekly evaluations</li>
                        <li>Regulatory report format</li>
                        <li>Dedicated support</li>
                        <li>Custom scoring domains</li>
                    </ul>
                    <button class="btn-tier" id="btn-critical" onclick="contactSales('critical')">Contact Sales</button>
                </div>
            </div>
            <p style="text-align:center;margin-top:20px;font-size:11px;color:var(--text-muted)">
                Questions? <a href="mailto:support@ontostandard.org">support@ontostandard.org</a>
            </p>
        </div>

        <!-- ==================== ACCOUNT ==================== -->
        <div class="page" id="page-settings">
            <h1 style="font-size:18px;font-weight:600;margin-bottom:20px">Account</h1>
            <div class="card">
                <div class="settings-section">
                    <h3>Profile</h3>
                    <div class="info-row">
                        <span class="info-key">Name</span>
                        <span class="info-val" id="settings-name">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="info-key">Email</span>
                        <span class="info-val" id="settings-email">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="info-key">Plan</span>
                        <span class="info-val" id="settings-plan">Open</span>
                    </div>
                    <div class="info-row">
                        <span class="info-key">Member since</span>
                        <span class="info-val" id="settings-since">‚Äî</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Organization</h3>
                    <div id="org-none">
                        <p class="section-text" style="margin-bottom:10px">No organization registered.</p>
                        <button class="btn btn-outline" onclick="openOrgModal()" style="font-size:11px">Register Organization</button>
                    </div>
                    <div id="org-registered" class="hidden">
                        <div class="info-row">
                            <span class="info-key">Company</span>
                            <span class="info-val" id="org-name">‚Äî</span>
                        </div>
                        <div class="info-row">
                            <span class="info-key">Industry</span>
                            <span class="info-val" id="org-industry">‚Äî</span>
                        </div>
                        <button class="btn btn-outline" onclick="openOrgModal()" style="font-size:11px;margin-top:8px">Edit</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Support</h3>
                    <div class="info-row">
                        <span class="info-key">General</span>
                        <a class="info-val" href="mailto:support@ontostandard.org">support@ontostandard.org</a>
                    </div>
                </div>
                <div class="settings-section" style="margin-bottom:0">
                    <h3>Danger Zone</h3>
                    <button class="btn-danger" onclick="deleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>

    </main>
</div>

<!-- ==================== MODALS ==================== -->

<!-- ADD MODEL MODAL -->
<div class="modal-overlay" id="modal-add-model">
    <div class="modal">
        <div class="modal-header">
            <h2>Connect AI Model</h2>
            <button class="modal-close" onclick="closeModal('modal-add-model')">&times;</button>
        </div>
        <div class="form-group">
            <label class="form-label">Model Name</label>
            <input type="text" class="form-input" id="model-name" placeholder="e.g. Production GPT-4o">
        </div>
        <div class="form-group">
            <label class="form-label">Provider</label>
            <select class="form-input" id="model-provider">
                <option value="openai">OpenAI</option>
                <option value="anthropic">Anthropic</option>
                <option value="google">Google</option>
                <option value="custom">Custom Endpoint</option>
            </select>
        </div>
        <div class="form-group" id="model-api-key-group">
            <label class="form-label">API Key</label>
            <input type="password" class="form-input" id="model-api-key" placeholder="sk-...">
            <div style="font-size:11px;color:var(--text-muted);margin-top:4px">Your key is used only to send 100 evaluation questions. Never stored.</div>
        </div>
        <div class="form-group hidden" id="model-upload-group">
            <label class="form-label">Upload Responses</label>
            <input type="file" class="form-input" id="model-upload-file" accept=".csv,.json" style="padding:6px">
            <div style="font-size:11px;color:var(--text-muted);margin-top:4px">CSV or JSON with question_id and response columns.</div>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px">
            <button class="btn btn-outline" onclick="closeModal('modal-add-model')">Cancel</button>
            <button class="btn btn-primary" onclick="submitModel()" id="submit-model-btn">Run Evaluation</button>
        </div>
    </div>
</div>

<!-- ORG MODAL -->
<div class="modal-overlay" id="modal-org">
    <div class="modal">
        <div class="modal-header">
            <h2>Organization</h2>
            <button class="modal-close" onclick="closeModal('modal-org')">&times;</button>
        </div>
        <div class="form-group">
            <label class="form-label">Company Name</label>
            <input type="text" class="form-input" id="org-input-name" placeholder="Acme Corp">
        </div>
        <div class="form-group">
            <label class="form-label">Industry</label>
            <select class="form-input" id="org-input-industry">
                <option value="">Select...</option>
                <option value="healthcare">Healthcare & Medical</option>
                <option value="financial">Financial Services</option>
                <option value="legal">Legal Services</option>
                <option value="defense">Defense & Security</option>
                <option value="ai_ml">AI / Machine Learning</option>
                <option value="software">Software & SaaS</option>
                <option value="government">Government & Public</option>
                <option value="research">Research & Academia</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Registration Number <span style="font-weight:400;text-transform:none">(optional)</span></label>
            <input type="text" class="form-input" id="org-input-reg" placeholder="Company reg number">
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px">
            <button class="btn btn-outline" onclick="closeModal('modal-org')">Cancel</button>
            <button class="btn btn-primary" onclick="saveOrg()">Save</button>
        </div>
    </div>
</div>

<!-- ==================== JAVASCRIPT ==================== -->
<script>
// === CONFIG ===
const API_BASE = 'https://api.ontostandard.org';
let currentUser = null;
let userModels = [];
let userReports = [];
let sessionTimer = null;

// === API WRAPPER ===
async function api(endpoint, options = {}) {
    const token = localStorage.getItem('onto_token');
    const headers = { 'Content-Type': 'application/json', ...options.headers };
    if (token) headers['Authorization'] = `Bearer ${token}`;
    
    try {
        const resp = await fetch(`${API_BASE}${endpoint}`, { ...options, headers });
        if (resp.status === 401) { handleSessionExpired(); return null; }
        if (!resp.ok) {
            const err = await resp.json().catch(() => ({ detail: 'Request failed' }));
            throw new Error(err.detail || `Error ${resp.status}`);
        }
        return await resp.json();
    } catch (e) {
        if (e.message !== 'Failed to fetch') showToast(e.message, 'error');
        throw e;
    }
}

// === TOAST ===
function showToast(message, type = 'info') {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.textContent = message;
    container.appendChild(toast);
    setTimeout(() => toast.remove(), 4000);
}

// === THEME ===
function toggleTheme() {
    const html = document.documentElement;
    const current = html.getAttribute('data-theme');
    html.setAttribute('data-theme', current === 'light' ? '' : 'light');
    localStorage.setItem('onto_theme', current === 'light' ? 'dark' : 'light');
}
(function() {
    const saved = localStorage.getItem('onto_theme');
    if (saved === 'light') document.documentElement.setAttribute('data-theme', 'light');
})();

// === MOBILE ===
function toggleMobile() {
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('mobile-overlay').classList.toggle('active');
}
function toggleAuthMenu() {
    document.getElementById('auth-menu').classList.toggle('open');
    document.getElementById('auth-menu-overlay').classList.toggle('active');
}
function closeAuthMenu() {
    document.getElementById('auth-menu').classList.remove('open');
    document.getElementById('auth-menu-overlay').classList.remove('active');
}

// === PASSWORD TOGGLE ===
function togglePassword(inputId, btn) {
    const input = document.getElementById(inputId);
    input.type = input.type === 'password' ? 'text' : 'password';
}

// === AUTH ===
function showLogin() {
    document.getElementById('login-form').classList.remove('hidden');
    document.getElementById('register-form').classList.add('hidden');
    document.getElementById('verify-pending').classList.add('hidden');
    document.getElementById('verify-success').classList.add('hidden');
}
function showRegister() {
    document.getElementById('login-form').classList.add('hidden');
    document.getElementById('register-form').classList.remove('hidden');
    document.getElementById('verify-pending').classList.add('hidden');
    document.getElementById('verify-success').classList.add('hidden');
}
function setLoading(btn, loading) {
    if (loading) {
        btn.dataset.originalText = btn.textContent;
        btn.innerHTML = '<span class="spinner"></span>Loading...';
        btn.disabled = true;
    } else {
        btn.textContent = btn.dataset.originalText || 'Submit';
        btn.disabled = false;
    }
}

async function handleLogin(btn) {
    const email = document.getElementById('login-email').value.trim();
    const password = document.getElementById('login-password').value;
    if (!email || !password) return showToast('Please fill in all fields', 'error');
    
    setLoading(btn, true);
    try {
        const data = await api('/v1/auth/login', {
            method: 'POST',
            body: JSON.stringify({ email, password })
        });
        if (data?.access_token) {
            localStorage.setItem('onto_token', data.access_token);
            currentUser = data.user || { email, name: email.split('@')[0] };
            showDashboard();
        } else if (data?.requires_verification) {
            showVerifyPending(email);
        }
    } catch (e) {
        showToast(e.message || 'Login failed', 'error');
    }
    setLoading(btn, false);
}

async function handleRegister(btn) {
    const name = document.getElementById('reg-name').value.trim();
    const email = document.getElementById('reg-email').value.trim();
    const password = document.getElementById('reg-password').value;
    if (!name || !email || !password) return showToast('Please fill in all fields', 'error');
    if (password.length < 8) return showToast('Password must be at least 8 characters', 'error');
    
    setLoading(btn, true);
    try {
        const data = await api('/v1/auth/register', {
            method: 'POST',
            body: JSON.stringify({ name, email, password })
        });
        if (data) showVerifyPending(email);
    } catch (e) {
        showToast(e.message || 'Registration failed', 'error');
    }
    setLoading(btn, false);
}

function showVerifyPending(email) {
    document.getElementById('login-form').classList.add('hidden');
    document.getElementById('register-form').classList.add('hidden');
    document.getElementById('verify-pending').classList.remove('hidden');
    document.getElementById('verify-email-display').textContent = email;
    setupOTPInputs();
}

function setupOTPInputs() {
    const inputs = document.querySelectorAll('.otp-input');
    inputs.forEach((input, i) => {
        input.value = '';
        input.addEventListener('input', (e) => {
            if (e.target.value && i < inputs.length - 1) inputs[i + 1].focus();
        });
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Backspace' && !e.target.value && i > 0) inputs[i - 1].focus();
        });
    });
    inputs[0].focus();
}

function getOTPCode() {
    return Array.from(document.querySelectorAll('.otp-input')).map(i => i.value).join('');
}

async function handleVerifyOTP(btn) {
    const code = getOTPCode();
    if (code.length !== 6) return showToast('Enter 6-digit code', 'error');
    
    setLoading(btn, true);
    try {
        const email = document.getElementById('verify-email-display').textContent;
        const data = await api('/v1/auth/verify', {
            method: 'POST',
            body: JSON.stringify({ email, code })
        });
        if (data?.access_token) {
            localStorage.setItem('onto_token', data.access_token);
            currentUser = data.user || { email, name: email.split('@')[0] };
            document.getElementById('verify-pending').classList.add('hidden');
            document.getElementById('verify-success').classList.remove('hidden');
        }
    } catch (e) {
        showToast(e.message || 'Verification failed', 'error');
    }
    setLoading(btn, false);
}

async function resendVerification() {
    const email = document.getElementById('verify-email-display').textContent;
    try {
        await api('/v1/auth/resend', { method: 'POST', body: JSON.stringify({ email }) });
        showToast('Code resent', 'success');
    } catch (e) {
        showToast('Could not resend', 'error');
    }
}

function handleSessionExpired() {
    localStorage.removeItem('onto_token');
    currentUser = null;
    showAuthScreen();
    showToast('Session expired. Please sign in again.', 'info');
}

function handleLogout() {
    localStorage.removeItem('onto_token');
    currentUser = null;
    showAuthScreen();
}

// === NAVIGATION ===
function showAuthScreen() {
    document.getElementById('auth-screen').style.display = 'flex';
    document.getElementById('app-layout').style.display = 'none';
    showLogin();
}

function showDashboard() {
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app-layout').style.display = 'flex';
    updateUserUI();
    loadModels();
    loadSignal();
}

function showPage(page, el) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.sidebar-nav .nav-item').forEach(n => n.classList.remove('active'));
    const target = document.getElementById('page-' + page);
    if (target) target.classList.add('active');
    if (el) el.classList.add('active');
    else {
        document.querySelectorAll('.nav-item').forEach(n => {
            const oc = n.getAttribute('onclick');
            if (oc && oc.includes("'" + page + "'")) n.classList.add('active');
        });
    }
    // Close mobile sidebar
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('mobile-overlay').classList.remove('active');
}

// === USER UI ===
function updateUserUI() {
    if (!currentUser) return;
    const name = currentUser.name || currentUser.email?.split('@')[0] || 'User';
    document.getElementById('user-name').textContent = name;
    document.getElementById('user-avatar').textContent = name.charAt(0).toUpperCase();
    document.getElementById('user-plan').textContent = (currentUser.tier || 'open').charAt(0).toUpperCase() + (currentUser.tier || 'open').slice(1);
    document.getElementById('settings-name').textContent = name;
    document.getElementById('settings-email').textContent = currentUser.email || '‚Äî';
    document.getElementById('settings-plan').textContent = currentUser.tier || 'Open';
    document.getElementById('settings-since').textContent = currentUser.created_at ? new Date(currentUser.created_at).toLocaleDateString() : '‚Äî';
    
    // Billing buttons
    const tier = currentUser.tier || 'open';
    document.querySelectorAll('.btn-tier').forEach(b => { b.classList.remove('current'); b.disabled = false; });
    const activeBtn = document.getElementById('btn-' + tier);
    if (activeBtn) { activeBtn.classList.add('current'); activeBtn.disabled = true; activeBtn.textContent = 'Current'; }
}

// === MODELS ===
async function loadModels() {
    try {
        const data = await api('/v1/models');
        userModels = data?.models || [];
    } catch { userModels = []; }
    renderModels();
}

function renderModels() {
    const empty = document.getElementById('models-empty');
    const list = document.getElementById('models-list');
    const addBtn = document.getElementById('add-model-btn');
    
    if (userModels.length === 0) {
        empty.style.display = 'block';
        list.style.display = 'none';
        addBtn.style.display = 'none';
        document.getElementById('signal-panel').style.display = 'none';
        document.getElementById('latest-report').style.display = 'none';
        document.getElementById('reports-section').style.display = 'none';
        updateStats();
        return;
    }
    
    empty.style.display = 'none';
    list.style.display = 'block';
    addBtn.style.display = 'inline-flex';
    document.getElementById('signal-panel').style.display = 'block';
    
    list.innerHTML = userModels.map(m => {
        const gradeClass = getGradeClass(m.grade || '‚Äî');
        return `<div class="model-card">
            <div class="model-top">
                <div>
                    <div class="model-name">${esc(m.name)}</div>
                    <div class="model-provider">${esc(m.provider || '‚Äî')}</div>
                </div>
                <div class="model-score">
                    <div class="model-composite">${m.composite != null ? m.composite.toFixed(2) : '‚Äî'}</div>
                    <div class="model-grade ${gradeClass}">${m.grade || '‚Äî'}</div>
                </div>
            </div>
            <div class="model-meta">Last evaluated: ${m.last_eval ? new Date(m.last_eval).toLocaleDateString() : 'Never'}</div>
            <div class="model-actions">
                <button class="btn btn-outline" onclick="viewReport('${m.id}')" style="font-size:11px;padding:5px 12px">View Report</button>
                <button class="btn btn-outline" onclick="reEvaluate('${m.id}')" style="font-size:11px;padding:5px 12px">Re-evaluate</button>
                <button class="btn-danger" onclick="deleteModel('${m.id}')">Remove</button>
            </div>
        </div>`;
    }).join('');
    
    updateStats();
    renderLatestReport();
    renderReports();
}

function updateStats() {
    document.getElementById('stat-models').textContent = userModels.length;
    
    const withScores = userModels.filter(m => m.composite != null);
    if (withScores.length > 0) {
        const avg = withScores.reduce((s, m) => s + m.composite, 0) / withScores.length;
        document.getElementById('stat-composite').textContent = avg.toFixed(2);
        document.getElementById('stat-grade').textContent = compositeToGrade(avg);
    } else {
        document.getElementById('stat-composite').textContent = '‚Äî';
        document.getElementById('stat-grade').textContent = '‚Äî';
    }
    
    const totalEvals = userModels.reduce((s, m) => s + (m.eval_count || 0), 0);
    document.getElementById('stat-evals').textContent = totalEvals;
}

function renderLatestReport() {
    const withEvals = userModels.filter(m => m.composite != null).sort((a, b) => new Date(b.last_eval) - new Date(a.last_eval));
    if (withEvals.length === 0) {
        document.getElementById('latest-report').style.display = 'none';
        return;
    }
    
    const m = withEvals[0];
    document.getElementById('latest-report').style.display = 'block';
    document.getElementById('report-date').textContent = m.last_eval ? new Date(m.last_eval).toLocaleDateString() : '‚Äî';
    document.getElementById('report-model-name').textContent = m.name;
    document.getElementById('report-model-provider').textContent = m.provider || '‚Äî';
    document.getElementById('report-composite').textContent = m.composite.toFixed(2);
    
    const grade = m.grade || compositeToGrade(m.composite);
    const gradeEl = document.getElementById('report-grade');
    gradeEl.textContent = grade;
    gradeEl.className = 'model-grade ' + getGradeClass(grade);
    
    // Metrics
    const metrics = m.metrics || {};
    setMetric('qd', metrics.qd);
    setMetric('ss', metrics.ss);
    setMetric('um', metrics.um);
    setMetric('cp', metrics.cp);
    setMetric('vq', metrics.vq);
    setMetric('conf', metrics.conf);
}

function setMetric(key, value) {
    const valEl = document.getElementById('rm-' + key);
    const barEl = document.getElementById('rb-' + key);
    if (!valEl) return;
    valEl.textContent = value != null ? value.toFixed(2) : '‚Äî';
    if (barEl && value != null) {
        const maxVal = key === 'ss' || key === 'conf' ? 1 : key === 'vq' ? 0.2 : 4;
        barEl.style.width = Math.min(100, (value / maxVal) * 100) + '%';
    }
}

function renderReports() {
    // For now, derive reports from models
    const reports = userModels.filter(m => m.composite != null).sort((a, b) => new Date(b.last_eval) - new Date(a.last_eval));
    const section = document.getElementById('reports-section');
    const list = document.getElementById('reports-list');
    
    if (reports.length === 0) {
        section.style.display = 'none';
        return;
    }
    
    section.style.display = 'block';
    document.getElementById('reports-count').textContent = reports.length + ' report' + (reports.length !== 1 ? 's' : '');
    
    list.innerHTML = reports.map(m => {
        const grade = m.grade || compositeToGrade(m.composite);
        return `<div class="report-row">
            <span class="report-icon">üìÑ</span>
            <div class="report-info">
                <div class="report-title">${esc(m.name)}</div>
                <div class="report-date">${m.last_eval ? new Date(m.last_eval).toLocaleDateString() : '‚Äî'} ¬∑ Composite: ${m.composite.toFixed(2)}</div>
            </div>
            <span class="report-grade" style="color:${gradeColor(grade)}">${grade}</span>
            <div class="report-actions">
                <button onclick="viewReport('${m.id}')">View</button>
                <button onclick="downloadReport('${m.id}')">PDF</button>
            </div>
        </div>`;
    }).join('');
}

// === SIGNAL ===
async function loadSignal() {
    try {
        const data = await api('/v1/signal/status');
        if (data) {
            document.getElementById('signal-id').textContent = data.signal_id || 'SIG-...';
            document.getElementById('signal-hash').textContent = data.latest_hash || '‚Äî';
            if (data.uptime) document.getElementById('sig-uptime').textContent = formatUptime(data.uptime);
            if (data.generated) document.getElementById('sig-generated').textContent = data.generated;
            startSignalCountdown(data.next_in || 60);
        }
    } catch {
        document.getElementById('signal-id').textContent = 'SIG-OFFLINE';
    }
}

function toggleSignalPanel() {
    const body = document.getElementById('signal-body');
    const chevron = document.getElementById('signal-chevron');
    if (body.style.display === 'none') {
        body.style.display = 'block';
        chevron.style.transform = 'rotate(180deg)';
    } else {
        body.style.display = 'none';
        chevron.style.transform = '';
    }
}

let countdownInterval;
function startSignalCountdown(seconds) {
    clearInterval(countdownInterval);
    let remaining = seconds;
    const el = document.getElementById('signal-countdown');
    countdownInterval = setInterval(() => {
        remaining--;
        if (remaining <= 0) { remaining = 60; loadSignal(); }
        el.textContent = remaining + 's';
    }, 1000);
}

function formatUptime(seconds) {
    const d = Math.floor(seconds / 86400);
    const h = Math.floor((seconds % 86400) / 3600);
    return d > 0 ? d + 'd ' + h + 'h' : h + 'h';
}

// === MODALS ===
function closeModal(id) {
    document.getElementById(id).classList.remove('active');
}

function openAddModelModal(type) {
    document.getElementById('modal-add-model').classList.add('active');
    // Show/hide API key vs upload based on type
    const apiGroup = document.getElementById('model-api-key-group');
    const uploadGroup = document.getElementById('model-upload-group');
    if (type === 'upload' || type === 'local') {
        apiGroup.classList.add('hidden');
        uploadGroup.classList.remove('hidden');
    } else {
        apiGroup.classList.remove('hidden');
        uploadGroup.classList.add('hidden');
    }
}

async function submitModel() {
    const name = document.getElementById('model-name').value.trim();
    const provider = document.getElementById('model-provider').value;
    if (!name) return showToast('Enter a model name', 'error');
    
    const btn = document.getElementById('submit-model-btn');
    setLoading(btn, true);
    try {
        await api('/v1/models', {
            method: 'POST',
            body: JSON.stringify({ name, provider })
        });
        closeModal('modal-add-model');
        showToast('Model registered', 'success');
        loadModels();
    } catch (e) {
        showToast(e.message || 'Failed to register model', 'error');
    }
    setLoading(btn, false);
}

async function deleteModel(id) {
    if (!confirm('Remove this model?')) return;
    try {
        await api(`/v1/models/${id}`, { method: 'DELETE' });
        showToast('Model removed', 'success');
        loadModels();
    } catch (e) {
        showToast(e.message || 'Failed', 'error');
    }
}

function viewReport(modelId) { /* TODO: open report view */ showToast('Report view coming soon', 'info'); }
function reEvaluate(modelId) { showToast('Re-evaluation started', 'info'); }
function downloadReport(modelId) { showToast('PDF download coming soon', 'info'); }
function verifyReport() { window.open('/verify/', '_blank'); }
function shareReport() { navigator.clipboard?.writeText(window.location.href); showToast('Link copied', 'success'); }

// === SETTINGS ===
function openOrgModal() { document.getElementById('modal-org').classList.add('active'); }
async function saveOrg() {
    const name = document.getElementById('org-input-name').value.trim();
    const industry = document.getElementById('org-input-industry').value;
    if (!name) return showToast('Enter company name', 'error');
    
    try {
        await api('/v1/company', { method: 'POST', body: JSON.stringify({ name, industry, reg: document.getElementById('org-input-reg').value }) });
        closeModal('modal-org');
        showToast('Organization saved', 'success');
        document.getElementById('org-none').classList.add('hidden');
        document.getElementById('org-registered').classList.remove('hidden');
        document.getElementById('org-name').textContent = name;
        document.getElementById('org-industry').textContent = industry || '‚Äî';
    } catch (e) {
        showToast(e.message || 'Failed', 'error');
    }
}

function deleteAccount() {
    if (!confirm('This will permanently delete your account and all data. Are you sure?')) return;
    if (!confirm('This cannot be undone. Type your email to confirm.')) return;
    api('/v1/auth/delete', { method: 'DELETE' }).then(() => {
        handleLogout();
        showToast('Account deleted', 'info');
    }).catch(() => showToast('Failed to delete account', 'error'));
}

// === API KEY ===
function toggleApiKeyVisibility() {
    const input = document.getElementById('api-key-display');
    const btn = document.getElementById('toggle-key-btn');
    if (input.type === 'password') { input.type = 'text'; btn.textContent = 'Hide'; }
    else { input.type = 'password'; btn.textContent = 'Show'; }
}
function copyApiKey() {
    const input = document.getElementById('api-key-display');
    navigator.clipboard?.writeText(input.value);
    showToast('API key copied', 'success');
}
async function regenerateApiKey() {
    if (!confirm('Regenerate API key? The old key will stop working.')) return;
    try {
        const data = await api('/v1/auth/regenerate-key', { method: 'POST' });
        if (data?.api_key) {
            document.getElementById('api-key-display').value = data.api_key;
            showToast('New API key generated', 'success');
        }
    } catch (e) { showToast('Failed', 'error'); }
}

// === BILLING ===
function contactSales(plan) {
    window.location.href = `mailto:support@ontostandard.org?subject=ONTO ${plan} plan inquiry`;
}

// === UTILS ===
function esc(str) { const d = document.createElement('div'); d.textContent = str; return d.innerHTML; }

function compositeToGrade(composite) {
    if (composite >= 5.0) return 'A';
    if (composite >= 4.0) return 'A-';
    if (composite >= 3.0) return 'B+';
    if (composite >= 2.0) return 'B';
    if (composite >= 1.5) return 'C';
    if (composite >= 1.0) return 'D';
    return 'F';
}

function getGradeClass(grade) {
    if (!grade || grade === '‚Äî') return '';
    const first = grade.charAt(0);
    if (first === 'A') return 'grade-a';
    if (first === 'B') return 'grade-b';
    if (first === 'C') return 'grade-c';
    if (first === 'D') return 'grade-d';
    return 'grade-f';
}

function gradeColor(grade) {
    if (!grade) return 'var(--text-muted)';
    const first = grade.charAt(0);
    if (first === 'A') return '#15803d';
    if (first === 'B') return '#3b82f6';
    if (first === 'C') return '#d97706';
    if (first === 'D') return '#dc2626';
    return '#dc2626';
}

// === INIT ===
(function init() {
    const token = localStorage.getItem('onto_token');
    if (token) {
        // Try to load user profile
        api('/v1/auth/me').then(data => {
            if (data) {
                currentUser = data;
                showDashboard();
            } else {
                showAuthScreen();
            }
        }).catch(() => showAuthScreen());
    } else {
        showAuthScreen();
    }
})();
</script>
</body>
</html>
